var KEYDOWN=!1,PAUSE=!1,LOCK=!1,HIGHSCORE=0,SCORE=0,SCORE_BUBBLE=10,SCORE_SUPER_BUBBLE=50,SCORE_GHOST_COMBO=200,LIFES=2,GAMEOVER=!1,LEVEL=1,LEVEL_NEXT_TIMER=-1,LEVEL_NEXT_STATE=0,TIME_GENERAL_TIMER=-1,TIME_GAME=0,TIME_LEVEL=0,TIME_LIFE=0,TIME_FRUITS=0,HELP_DELAY=1500,HELP_TIMER=-1;function blinkHelp(){$(".help-button").attr("class").indexOf("yo")>-1?$(".help-button").removeClass("yo"):$(".help-button").addClass("yo")}function initGame(e){if(e){stopPresentation(),stopTrailer(),HOME=!1,GAMEOVER=!1,$("#help").fadeOut("slow"),score(0),clearMessage(),$("#home").hide(),$("#panel").show();var T=null,t=document.getElementById("canvas-panel-title-pacman");t.setAttribute("width","38"),t.setAttribute("height","32"),t.getContext&&(T=t.getContext("2d"));var _=15,o=16;T.fillStyle="#fff200",T.beginPath(),T.arc(_,o,14,(.35-3*.05)*Math.PI,(1.65+3*.05)*Math.PI,!1),T.lineTo(_-5,o),T.fill(),T.closePath(),_=32,o=16,T.fillStyle="#dca5be",T.beginPath(),T.arc(_,o,4,0,2*Math.PI,!1),T.fill(),T.closePath()}initBoard(),drawBoard(),drawBoardDoor(),initPaths(),drawPaths(),initBubbles(),drawBubbles(),initFruits(),initPacman(),drawPacman(),initGhosts(),drawGhosts(),lifes(),ready()}function win(){stopAllSound(),LOCK=!0,stopPacman(),stopGhosts(),stopBlinkSuperBubbles(),stopTimes(),eraseGhosts(),setTimeout("prepareNextLevel()",1e3)}function prepareNextLevel(e){-1===LEVEL_NEXT_TIMER?(eraseBoardDoor(),LEVEL_NEXT_TIMER=setInterval("prepareNextLevel()",250)):(drawBoard(++LEVEL_NEXT_STATE%2==0),LEVEL_NEXT_STATE>6&&(LEVEL_NEXT_STATE=0,clearInterval(LEVEL_NEXT_TIMER),LEVEL_NEXT_TIMER=-1,nextLevel()))}function nextLevel(){LOCK=!1,LEVEL++,erasePacman(),eraseGhosts(),resetPacman(),resetGhosts(),initGame(),TIME_LEVEL=0,TIME_LIFE=0,TIME_FRUITS=0}function retry(){stopTimes(),erasePacman(),eraseGhosts(),resetPacman(),resetGhosts(),drawPacman(),drawGhosts(),TIME_LIFE=0,TIME_FRUITS=0,ready()}function ready(){LOCK=!0,message("ready!"),playReadySound(),setTimeout("go()","4100")}function go(){playSirenSound(),LOCK=!1,startTimes(),clearMessage(),blinkSuperBubbles(),movePacman(),moveGhosts()}function startTimes(){-1===TIME_GENERAL_TIMER&&(TIME_GENERAL_TIMER=setInterval("times()",1e3))}function times(){TIME_GAME++,TIME_LEVEL++,TIME_LIFE++,TIME_FRUITS++,fruit()}function pauseTimes(){-1!=TIME_GENERAL_TIMER&&(clearInterval(TIME_GENERAL_TIMER),TIME_GENERAL_TIMER=-1),null!=FRUIT_CANCEL_TIMER&&FRUIT_CANCEL_TIMER.pause()}function resumeTimes(){startTimes(),null!=FRUIT_CANCEL_TIMER&&FRUIT_CANCEL_TIMER.resume()}function stopTimes(){-1!=TIME_GENERAL_TIMER&&(clearInterval(TIME_GENERAL_TIMER),TIME_GENERAL_TIMER=-1),null!=FRUIT_CANCEL_TIMER&&(FRUIT_CANCEL_TIMER.cancel(),FRUIT_CANCEL_TIMER=null,eraseFruit())}function pauseGame(){PAUSE||(stopAllSound(),PAUSE=!0,message("pause"),pauseTimes(),pausePacman(),pauseGhosts(),stopBlinkSuperBubbles())}function resumeGame(){PAUSE&&(testStateGhosts(),PAUSE=!1,clearMessage(),resumeTimes(),resumePacman(),resumeGhosts(),blinkSuperBubbles())}function lifes(e){e&&(e>0&&playExtraLifeSound(),LIFES+=e);var T=document.getElementById("canvas-lifes");if(T.setAttribute("width","120"),T.setAttribute("height","30"),T.getContext){var t=T.getContext("2d");t.clearRect(0,0,120,30),t.fillStyle="#fff200";for(var _=0,o=LIFES;_<o&&_<4;_++)t.beginPath(),t.arc(13+30*_,15,13,(1.35-3*.05)*Math.PI,.8*Math.PI,!1),t.lineTo(13+30*_+4,15),t.fill(),t.closePath()}}function gameover(){GAMEOVER=!0,message("game over"),stopTimes(),erasePacman(),eraseGhosts(),resetPacman(),resetGhosts(),TIME_GAME=0,TIME_LEVEL=0,TIME_LIFE=0,TIME_FRUITS=0,LIFES=2,LEVEL=1,SCORE=0}function message(e){$("#message").html(e),"game over"===e&&$("#message").addClass("red")}function clearMessage(){$("#message").html(""),$("#message").removeClass("red")}function score(s,type){var scoreBefore=SCORE/1e4|0;SCORE+=s,0===SCORE?$("#score span").html("00"):$("#score span").html(SCORE);var scoreAfter=SCORE/1e4|0;scoreAfter>scoreBefore&&lifes(1),SCORE>HIGHSCORE&&(HIGHSCORE=SCORE,0===HIGHSCORE?$("#highscore span").html("00"):$("#highscore span").html(HIGHSCORE)),!type||"clyde"!==type&&"pinky"!==type&&"inky"!==type&&"blinky"!==type?type&&"fruit"===type&&($("#board").append('<span class="fruits">'+s+"</span>"),$("#board span.fruits").css("top",FRUITS_POSITION_Y-14+"px"),$("#board span.fruits").css("left",FRUITS_POSITION_X-14+"px")):(erasePacman(),eraseGhost(type),$("#board").append('<span class="combo">'+SCORE_GHOST_COMBO+"</span>"),$("#board span.combo").css("top",eval("GHOST_"+type.toUpperCase()+"_POSITION_Y - 10")+"px"),$("#board span.combo").css("left",eval("GHOST_"+type.toUpperCase()+"_POSITION_X - 10")+"px"),SCORE_GHOST_COMBO*=2)}function isPointInRect(e,T){return!(T.width<=0||T.height<=0)&&e.x>=T.x&&e.x<=T.x+T.width&&e.y>=T.y&&e.y<=T.y+T.height}function Timer(e,T){var t,_,o,a=T;this.start=function(){o=!0,_=new Date,t=setTimeout(e,a)},this.resume=function(){o=!0,_=new Date,t=setTimeout(e,a)},this.cancel=function(){o=!1,clearTimeout(t),a=0},this.pause=function(){o=!1,clearTimeout(t),a-=new Date-_},this.remain=function(){return o&&(this.pause(),this.start()),a},this.isRunning=function(){return o},this.start()}function oneAxe(){return Math.floor(2*Math.random()+1)}function anyGoodIdea(){return Math.floor(4*Math.random()+1)}function whatsYourProblem(){return Math.floor(6*Math.random()+1)}CanvasRenderingContext2D.prototype.roundRect=function(e,T,t,_,o){var a=Math.PI/180;t-e-2*o<0&&(o=(t-e)/2),_-T-2*o<0&&(o=(_-T)/2),this.beginPath(),this.moveTo(e+o,T),this.lineTo(t-o,T),this.arc(t-o,T+o,o,270*a,360*a,!1),this.lineTo(t,_-o),this.arc(t-o,_-o,o,0*a,90*a,!1),this.lineTo(e+o,_),this.arc(e+o,_-o,o,90*a,180*a,!1),this.lineTo(e,T+o),this.arc(e+o,T+o,o,180*a,270*a,!1),this.closePath()},CanvasRenderingContext2D.prototype.oval=function(e,T,t,_){this.beginPath(),this.moveTo(e,T-_/2),this.bezierCurveTo(e+t/2,T-_/2,e+t/2,T+_/2,e,T+_/2),this.bezierCurveTo(e-t/2,T+_/2,e-t/2,T-_/2,e,T-_/2)};var BOARD_CANVAS_CONTEXT=null;function initBoard(){var e=document.getElementById("canvas-board");e.setAttribute("width","550"),e.setAttribute("height","550"),e.getContext&&(BOARD_CANVAS_CONTEXT=e.getContext("2d"))}function getBoardCanevasContext(){return BOARD_CANVAS_CONTEXT}function drawBoard(e){var T=getBoardCanevasContext();T.strokeStyle=e&&!0===e?"#fff":"#193fff",T.lineWidth="2",T.beginPath(),T.moveTo(0,231),T.lineTo(97,231),T.arcTo(99,231,99,228,5),T.lineTo(99,179),T.arcTo(99,176,97,176,5),T.lineTo(12,176),T.arcTo(1,176,1,165,12),T.lineTo(1,10),T.arcTo(1,1,10,1,12),T.lineTo(536,1),T.arcTo(547,1,547,12,12),T.lineTo(547,165),T.arcTo(547,176,536,176,12),T.lineTo(452,176),T.arcTo(449,176,449,179,5),T.lineTo(449,228),T.arcTo(449,231,451,231,5),T.lineTo(550,231),T.stroke(),T.moveTo(0,238),T.lineTo(98,238),T.arcTo(106,238,106,232,12),T.lineTo(106,179),T.arcTo(106,169,101,169,12),T.lineTo(15,169),T.arcTo(9,169,9,158,5),T.lineTo(9,15),T.arcTo(9,7,18,7,5),T.lineTo(259,7),T.arcTo(266,7,266,11,5),T.lineTo(266,73),T.arcTo(266,78,269,78,5),T.lineTo(280,78),T.arcTo(283,78,283,75,5),T.lineTo(283,15),T.arcTo(283,7,286,7,5),T.lineTo(533,7),T.arcTo(540,7,540,11,5),T.lineTo(540,165),T.arcTo(540,169,533,169,5),T.lineTo(452,169),T.arcTo(442,169,442,172,12),T.lineTo(442,230),T.arcTo(442,238,445,238,12),T.lineTo(550,238),T.stroke(),T.moveTo(0,283),T.lineTo(97,283),T.arcTo(99,283,99,286,5),T.lineTo(99,335),T.arcTo(99,338,96,338,5),T.lineTo(9,338),T.arcTo(1,338,1,341,12),T.lineTo(1,540),T.arcTo(1,548,9,548,12),T.lineTo(539,548),T.arcTo(547,548,547,540,12),T.lineTo(547,345),T.arcTo(547,337,539,337,12),T.lineTo(453,337),T.arcTo(450,337,450,334,5),T.lineTo(450,286),T.arcTo(450,283,453,283,5),T.lineTo(550,283),T.stroke(),T.moveTo(0,276),T.lineTo(99,276),T.arcTo(107,276,107,282,12),T.lineTo(107,335),T.arcTo(107,345,101,345,12),T.lineTo(12,345),T.arcTo(9,345,9,348,5),T.lineTo(9,432),T.arcTo(9,435,12,435,5),T.lineTo(44,435),T.arcTo(47,435,47,438,5),T.lineTo(47,448),T.arcTo(47,451,44,451,5),T.lineTo(12,451),T.arcTo(9,451,9,454,5),T.lineTo(9,538),T.arcTo(9,541,12,541,5),T.lineTo(536,541),T.arcTo(539,541,539,538,5),T.lineTo(539,455),T.arcTo(539,451,536,451,5),T.lineTo(505,451),T.arcTo(502,451,502,448,5),T.lineTo(502,439),T.arcTo(502,436,505,436,5),T.lineTo(536,436),T.arcTo(539,433,539,430,5),T.lineTo(539,349),T.arcTo(539,345,536,345,5),T.lineTo(455,345),T.arcTo(442,345,442,342,12),T.lineTo(442,288),T.arcTo(442,276,448,276,12),T.lineTo(550,276),T.stroke(),T.roundRect(50,45,107,79,5),T.stroke(),T.roundRect(50,116,107,132,5),T.stroke(),T.roundRect(148,45,224,79,5),T.stroke(),T.roundRect(148,382,224,398,5),T.stroke(),T.roundRect(148,276,165,345,5),T.stroke(),T.moveTo(56,504),T.lineTo(220,504),T.arcTo(223,504,223,501,5),T.lineTo(223,492),T.arcTo(223,489,220,489,5),T.lineTo(168,489),T.arcTo(165,489,165,486,5),T.lineTo(165,439),T.arcTo(165,436,162,436,5),T.lineTo(152,436),T.arcTo(149,436,149,439,5),T.lineTo(149,486),T.arcTo(149,489,146,489,5),T.lineTo(54,489),T.arcTo(51,489,51,492,5),T.lineTo(51,501),T.arcTo(51,504,54,504,5),T.stroke(),T.moveTo(55,382),T.lineTo(104,382),T.arcTo(107,382,107,385,5),T.lineTo(107,447),T.arcTo(107,450,104,450,5),T.lineTo(93,450),T.arcTo(90,450,90,447,5),T.lineTo(90,401),T.arcTo(90,398,87,398,5),T.lineTo(55,398),T.arcTo(52,398,52,395,5),T.lineTo(52,385),T.arcTo(52,382,55,382,5),T.stroke(),T.moveTo(148,121),T.lineTo(148,236),T.arcTo(148,239,151,239,5),T.lineTo(162,239),T.arcTo(165,239,165,236,5),T.lineTo(165,188),T.arcTo(165,185,168,185,5),T.lineTo(221,185),T.arcTo(224,185,224,182,5),T.lineTo(224,173),T.arcTo(224,170,221,170,5),T.lineTo(168,170),T.arcTo(165,170,165,169,5),T.lineTo(165,120),T.arcTo(165,117,162,117,5),T.lineTo(151,117),T.arcTo(148,117,148,120,5),T.stroke(),T.roundRect(442,45,498,79,5),T.stroke(),T.roundRect(442,116,498,132,5),T.stroke(),T.roundRect(324,45,400,79,5),T.stroke(),T.roundRect(324,382,400,398,5),T.stroke(),T.roundRect(383,276,400,345,5),T.stroke(),T.moveTo(330,504),T.lineTo(494,504),T.arcTo(497,504,497,501,5),T.lineTo(497,492),T.arcTo(497,489,494,489,5),T.lineTo(403,489),T.arcTo(400,489,400,486,5),T.lineTo(400,441),T.arcTo(397,436,394,436,5),T.lineTo(386,436),T.arcTo(383,436,383,439,5),T.lineTo(383,486),T.arcTo(383,489,380,489,5),T.lineTo(328,489),T.arcTo(325,489,325,492,5),T.lineTo(325,500),T.arcTo(325,504,328,504,5),T.stroke(),T.moveTo(495,382),T.lineTo(445,382),T.arcTo(442,382,442,385,5),T.lineTo(442,447),T.arcTo(442,450,445,450,5),T.lineTo(456,450),T.arcTo(459,450,459,447,5),T.lineTo(459,401),T.arcTo(459,398,462,398,5),T.lineTo(495,398),T.arcTo(498,398,498,395,5),T.lineTo(498,385),T.arcTo(498,382,495,382,5),T.stroke(),T.moveTo(400,121),T.lineTo(400,236),T.arcTo(400,239,397,239,5),T.lineTo(386,239),T.arcTo(383,239,383,236,5),T.lineTo(383,188),T.arcTo(383,185,380,185,5),T.lineTo(328,185),T.arcTo(325,185,325,182,5),T.lineTo(325,173),T.arcTo(325,170,328,170,5),T.lineTo(380,170),T.arcTo(383,170,383,169,5),T.lineTo(383,120),T.arcTo(383,117,385,117,5),T.lineTo(397,117),T.arcTo(400,117,400,120,5),T.stroke(),T.moveTo(212,117),T.lineTo(338,117),T.arcTo(341,120,341,123,5),T.lineTo(341,129),T.arcTo(341,132,338,132,5),T.lineTo(286,132),T.arcTo(283,132,283,135,5),T.lineTo(283,182),T.arcTo(283,185,280,185,5),T.lineTo(269,185),T.arcTo(266,185,266,182,5),T.lineTo(266,135),T.arcTo(266,132,262,132,5),T.lineTo(211,132),T.arcTo(208,132,208,129,5),T.lineTo(208,120),T.arcTo(208,117,211,117,5),T.stroke(),T.moveTo(212,329),T.lineTo(338,329),T.arcTo(341,332,341,335,5),T.lineTo(341,341),T.arcTo(341,344,338,344,5),T.lineTo(286,344),T.arcTo(283,344,283,347,5),T.lineTo(283,394),T.arcTo(283,397,280,397,5),T.lineTo(269,397),T.arcTo(266,397,266,394,5),T.lineTo(266,347),T.arcTo(266,344,262,344,5),T.lineTo(211,344),T.arcTo(208,344,208,129,5),T.lineTo(208,332),T.arcTo(208,329,211,329,5),T.stroke(),T.moveTo(212,436),T.lineTo(338,436),T.arcTo(341,439,341,442,5),T.lineTo(341,448),T.arcTo(341,451,338,451,5),T.lineTo(286,451),T.arcTo(283,451,283,454,5),T.lineTo(283,501),T.arcTo(283,503,280,503,5),T.lineTo(269,503),T.arcTo(266,503,266,501,5),T.lineTo(266,454),T.arcTo(266,451,262,451,5),T.lineTo(211,451),T.arcTo(208,451,208,236,5),T.lineTo(208,439),T.arcTo(208,436,211,436,5),T.stroke(),T.moveTo(254,223),T.lineTo(207,223),T.lineTo(207,292),T.lineTo(342,292),T.lineTo(342,223),T.lineTo(296,223),T.lineTo(296,230),T.lineTo(334,230),T.lineTo(334,284),T.lineTo(214,284),T.lineTo(214,230),T.lineTo(254,230),T.lineTo(254,223),T.stroke(),T.closePath()}function drawBoardDoor(){var e=getBoardCanevasContext();e.strokeStyle="white",e.lineWidth="5",e.beginPath(),e.moveTo(255,226),e.lineTo(295,226),e.stroke(),e.closePath()}function eraseBoardDoor(){getBoardCanevasContext().clearRect(255,220,40,10)}var PATHS=new Array,PATHS_CANVAS_CONTEXT=null;function initPaths(){var e=document.getElementById("canvas-paths");e.setAttribute("width","550"),e.setAttribute("height","550"),e.getContext&&(PATHS_CANVAS_CONTEXT=e.getContext("2d")),PATHS.push("128,416-422,416"),PATHS.push("30,98-518,98"),PATHS.push("2,258-186,258"),PATHS.push("362,258-548,258"),PATHS.push("186,204-362,204"),PATHS.push("186,310-362,310"),PATHS.push("30,522-518,522"),PATHS.push("238,258-314,258"),PATHS.push("276,204-276,258"),PATHS.push("128,26-128,470"),PATHS.push("30,26-244,26"),PATHS.push("30,26-30,150"),PATHS.push("30,150-128,150"),PATHS.push("244,26-244,98"),PATHS.push("186,204-186,364"),PATHS.push("30,364-244,364"),PATHS.push("244,364-244,416"),PATHS.push("30,364-30,416"),PATHS.push("30,416-70,416"),PATHS.push("70,416-70,470"),PATHS.push("30,470-128,470"),PATHS.push("30,470-30,522"),PATHS.push("244,150-244,204"),PATHS.push("186,150-244,150"),PATHS.push("186,98-186,150"),PATHS.push("244,470-244,522"),PATHS.push("186,470-244,470"),PATHS.push("186,416-186,470"),PATHS.push("422,26-422,470"),PATHS.push("304,26-518,26"),PATHS.push("518,26-518,150"),PATHS.push("304,26-304,98"),PATHS.push("422,150-518,150"),PATHS.push("362,204-362,364"),PATHS.push("304,364-518,364"),PATHS.push("304,364-304,416"),PATHS.push("518,364-518,416"),PATHS.push("480,416-518,416"),PATHS.push("480,416-480,470"),PATHS.push("422,470-518,470"),PATHS.push("518,470-518,522"),PATHS.push("304,150-304,204"),PATHS.push("304,150-362,150"),PATHS.push("362,98-362,150"),PATHS.push("304,470-304,522"),PATHS.push("304,470-362,470"),PATHS.push("362,416-362,470")}function getPathsCanevasContext(){return PATHS_CANVAS_CONTEXT}function drawPaths(){var e=getPathsCanevasContext();e.strokeStyle="red";for(var T=0,t=PATHS.length;T<t;T++){var _=PATHS[T],o=_.split("-")[0].split(",")[0],a=_.split("-")[0].split(",")[1],n=_.split("-")[1].split(",")[0],I=_.split("-")[1].split(",")[1];e.beginPath(),e.moveTo(o,a),e.lineTo(n,I),e.stroke(),e.closePath()}}var BUBBLES_ARRAY=new Array,BUBBLES_CANVAS_CONTEXT=null,BUBBLES_X_START=30,BUBBLES_X_END=518,BUBBLES_GAP=(BUBBLES_X_END-BUBBLES_X_START)/25,BUBBLES_Y_START=26,BUBBLES_Y_END=522,BUBBLES_SIZE=3,BUBBLES_COUNTER=0,SUPER_BUBBLES=[],SUPER_BUBBLES_SIZE=8,SUPER_BUBBLES_BLINK=!1,SUPER_BUBBLES_BLINK_STATE=0,SUPER_BUBBLES_BLINK_TIMER=-1,SUPER_BUBBLES_BLINK_SPEED=525;function initBubbles(){BUBBLES_COUNTER=0,BUBBLES_ARRAY.length=0;var e=document.getElementById("canvas-bubbles");e.setAttribute("width","550"),e.setAttribute("height","550"),e.getContext&&(BUBBLES_CANVAS_CONTEXT=e.getContext("2d"))}function getBubblesCanevasContext(){return BUBBLES_CANVAS_CONTEXT}function drawBubbles(){var e=getBubblesCanevasContext();e.fillStyle="#dca5be";for(var T=1,t=0;T<=29;T++)for(var _=getYFromLine(T),o=BUBBLES_X_START,a=BUBBLES_X_END,n=1;o<a;n++,o+=BUBBLES_GAP)if(canAddBubble(T,n)){var I="",s="";isSuperBubble(T,n)?(I="s",s=SUPER_BUBBLES_SIZE,SUPER_BUBBLES[t]=T+";"+n+";"+parseInt(correctionX(o,n))+","+parseInt(_)+";0",t++):(I="b",s=BUBBLES_SIZE),BUBBLES_COUNTER++,e.beginPath(),e.arc(correctionX(o,n),_,s,0,2*Math.PI,!1),e.fill(),e.closePath(),BUBBLES_ARRAY.push(parseInt(correctionX(o,n))+","+parseInt(_)+";"+T+";"+n+";"+I+";0")}}function stopBlinkSuperBubbles(){clearInterval(SUPER_BUBBLES_BLINK_TIMER),SUPER_BUBBLES_BLINK_TIMER=-1,SUPER_BUBBLES_BLINK=!1}function blinkSuperBubbles(){if(!1===SUPER_BUBBLES_BLINK)SUPER_BUBBLES_BLINK=!0,SUPER_BUBBLES_BLINK_TIMER=setInterval("blinkSuperBubbles()",SUPER_BUBBLES_BLINK_SPEED);else{SUPER_BUBBLES_BLINK_STATE=0===SUPER_BUBBLES_BLINK_STATE?1:0;for(var e=SUPER_BUBBLES.slice(0),T=0,t=e.length;T<t;T++){var _=e[T];if("0"===_.split(";")[3]){var o=parseInt(_.split(";")[2].split(",")[0]),a=parseInt(_.split(";")[2].split(",")[1]);if(1===SUPER_BUBBLES_BLINK_STATE)eraseBubble("s",o,a);else{var n=getBubblesCanevasContext();n.fillStyle="#dca5be",n.beginPath(),n.arc(o,a,SUPER_BUBBLES_SIZE,0,2*Math.PI,!1),n.fill(),n.closePath()}}}}}function setSuperBubbleOnXY(e,T,t){for(var _=0,o=SUPER_BUBBLES.length;_<o;_++){var a=SUPER_BUBBLES[_].split(";"),n=parseInt(a[2].split(",")[0]),I=parseInt(a[2].split(",")[1]);if(n===e&&I===T){SUPER_BUBBLES[_]=SUPER_BUBBLES[_].substr(0,SUPER_BUBBLES[_].length-1)+"1";break}}}function getBubbleOnXY(e,T){for(var t=null,_=0,o=BUBBLES_ARRAY.length;_<o;_++){var a=BUBBLES_ARRAY[_].split(";"),n=parseInt(a[0].split(",")[0]),I=parseInt(a[0].split(",")[1]);if(n===e&&I===T){t=BUBBLES_ARRAY[_];break}}return t}function eraseBubble(e,T,t){var _,o=getBubblesCanevasContext();_="s"===e?SUPER_BUBBLES_SIZE:BUBBLES_SIZE,o.clearRect(T-_,t-_,2*(_+1),2*(_+1))}function isSuperBubble(e,T){return!(23!==e&&4!==e||1!==T&&26!==T)}function canAddBubble(e,T){return!((e>=1&&e<=4||e>=9&&e<=10||e>=20&&e<=22||e>=26&&e<=28)&&(13===T||14===T)||(e>=2&&e<=4||e>=21&&e<=22)&&(T>=2&&T<=5||T>=7&&T<=11||T>=16&&T<=20||T>=22&&T<=25)||e>=6&&e<=7&&(T>=2&&T<=5||T>=7&&T<=8||T>=10&&T<=17||T>=19&&T<=20||T>=22&&T<=25)||8===e&&(T>=7&&T<=8||T>=13&&T<=14||T>=19&&T<=20)||e>=9&&e<=19&&(T>=1&&T<=5||T>=22&&T<=26)||(11===e||17===e)&&T>=7&&T<=20||!(9!==e&&10!==e||12!==T&&15!==T)||(e>=12&&e<=13||e>=15&&e<=16)&&(9===T||18===T)||14===e&&(T>=7&&T<=9||T>=18&&T<=20)||!(18!==e&&19!==e||9!==T&&18!==T)||e>=9&&e<=10&&(T>=7&&T<=11||T>=16&&T<=20)||(e>=11&&e<=13||e>=15&&e<=19)&&(T>=7&&T<=8||T>=19&&T<=20)||(e>=12&&e<=16||e>=18&&e<=19)&&T>=10&&T<=17||23===e&&(T>=4&&T<=5||T>=22&&T<=23)||e>=24&&e<=25&&(T>=1&&T<=2||T>=4&&T<=5||T>=7&&T<=8||T>=10&&T<=17||T>=19&&T<=20||T>=22&&T<=23||T>=25&&T<=26)||26===e&&(T>=7&&T<=8||T>=19&&T<=20)||e>=27&&e<=28&&(T>=2&&T<=11||T>=16&&T<=25))}function correctionX(e,T){return 3===T?e+1:6===T?e+1:15===T?e+1:18===T?e+1:21===T?e+2:24===T?e+2:26===T?e+1:e}function getYFromLine(e){var T=BUBBLES_Y_START;return e<8?T=BUBBLES_Y_START+18*(e-1):e>7&&e<15?T=150+18*(e-8):e>14&&e<21?T=256+18*(e-14):e>20&&e<26?T=362+18*(e-20):e>25&&e<29?T=452+18*(e-25):29===e&&(T=BUBBLES_Y_END),T}var FRUITS_CANVAS_CONTEXT=null,LEVEL_FRUITS_CANVAS_CONTEXT=null,FRUITS_SIZE=30,FRUITS_POSITION_X=276,FRUITS_POSITION_Y=310,FRUIT_MINIMUM_START=15,FRUIT_CANCEL_TIMER=null,FRUIT_CANCEL_SPEED=7500,FRUIT=null;function initFruits(){var e=document.getElementById("canvas-fruits");e.setAttribute("width","550"),e.setAttribute("height","550"),e.getContext&&(FRUITS_CANVAS_CONTEXT=e.getContext("2d"));var T=document.getElementById("canvas-level-fruits");T.setAttribute("width","265"),T.setAttribute("height","30"),T.getContext&&(LEVEL_FRUITS_CANVAS_CONTEXT=T.getContext("2d"));var t=getLevelFruitsCanevasContext();t.clearRect(0,0,265,30);var _=245,o=14,a=0;if(LEVEL>7){var n=LEVEL;n>13&&(n=13),a=-(n-7)}drawFruit(t,"cherry",_-37*a,o,27),a++,LEVEL>1&&(drawFruit(t,"strawberry",_-37*a,o,27),a++),LEVEL>2&&(drawFruit(t,"orange",_-37*a,o,27),a++),LEVEL>3&&(drawFruit(t,"orange",_-37*a,o,27),a++),LEVEL>4&&(drawFruit(t,"apple",_-37*a,o,27),a++),LEVEL>5&&(drawFruit(t,"apple",_-37*a,o,27),a++),LEVEL>6&&(drawFruit(t,"melon",_-37*a,o,27),a++),LEVEL>7&&(drawFruit(t,"melon",_-37*a,o,27),a++),LEVEL>8&&(drawFruit(t,"galboss",_-37*a,o,27),a++),LEVEL>9&&(drawFruit(t,"galboss",_-37*a,o,27),a++),LEVEL>10&&(drawFruit(t,"bell",_-37*a,o,27),a++),LEVEL>11&&(drawFruit(t,"bell",_-37*a,o,27),a++),LEVEL>12&&(drawFruit(t,"key",_-37*a,o,27),a++)}function getFruitsCanevasContext(){return FRUITS_CANVAS_CONTEXT}function getLevelFruitsCanevasContext(){return LEVEL_FRUITS_CANVAS_CONTEXT}function eatFruit(){playEatFruitSound();var e=0;"cherry"===FRUIT?e=100:"strawberry"===FRUIT?e=300:"orange"===FRUIT?e=500:"apple"===FRUIT?e=700:"melon"===FRUIT?e=1e3:"galboss"===FRUIT?e=2e3:"bell"===FRUIT?e=3e3:"key"===FRUIT&&(e=5e3),score(e,"fruit"),cancelFruit()}function fruit(){2===TIME_FRUITS&&$("#board .fruits").length>0&&$("#board .fruits").remove(),TIME_FRUITS>FRUIT_MINIMUM_START&&anyGoodIdea()>3&&oneFruit()}function oneFruit(){if(null===FRUIT_CANCEL_TIMER){var e=getFruitsCanevasContext();1===LEVEL?FRUIT="cherry":2===LEVEL?FRUIT="strawberry":3===LEVEL||4===LEVEL?FRUIT="orange":5===LEVEL||6===LEVEL?FRUIT="apple":7===LEVEL||8===LEVEL?FRUIT="melon":9===LEVEL||10===LEVEL?FRUIT="galboss":11===LEVEL||12===LEVEL?FRUIT="bell":13===LEVEL&&(FRUIT="key"),drawFruit(e,FRUIT,FRUITS_POSITION_X,FRUITS_POSITION_Y,FRUITS_SIZE),FRUIT_CANCEL_TIMER=new Timer("cancelFruit()",FRUIT_CANCEL_SPEED)}}function cancelFruit(){eraseFruit(),FRUIT_CANCEL_TIMER.cancel(),FRUIT_CANCEL_TIMER=null,TIME_FRUITS=0}function eraseFruit(){getFruitsCanevasContext().clearRect(FRUITS_POSITION_X-FRUITS_SIZE,FRUITS_POSITION_Y-FRUITS_SIZE,2*FRUITS_SIZE,2*FRUITS_SIZE)}function drawFruit(e,T,t,_,o){e.save(),"cherry"===T?drawCherry(e,t,_,o):"strawberry"===T?drawStrawberry(e,t,_,o):"orange"===T?drawOrange(e,t,_,o):"apple"===T?drawApple(e,t,_,o):"melon"===T?drawMelon(e,t,_+7,o/1.6):"galboss"===T?drawGalboss(e,t,_,o):"bell"===T?drawBell(e,t,_,o):"key"===T&&drawKey(e,t,_,o),e.restore()}function drawKey(e,T,t,_){e.translate(T-_/2,t-_/2),e.fillStyle="#52c4cc",e.beginPath(),e.rect(_/3,5,_-_/3,_/3),e.rect(_/6*3,2,_-_/3*2,_/(_/3)),e.fill(),e.fillStyle="#000",e.beginPath(),e.rect(_/6*3,_/6,_-_/3*2,_/10),e.fill(),e.strokeStyle="#ccc",e.lineWidth="3",e.beginPath(),e.moveTo(_/2+2,_-4),e.lineTo(_/2+2,_/2),e.stroke(),e.beginPath(),e.moveTo(_/2+7,_-4),e.lineTo(_/2+7,_/2),e.stroke(),e.beginPath(),e.moveTo(_/2+4,_-4),e.lineTo(_/2+4,_-1),e.stroke(),e.beginPath(),e.moveTo(_/2+5,_-4),e.lineTo(_/2+5,_-1),e.stroke(),e.beginPath(),e.moveTo(_/2+9,_/2+2),e.lineTo(_/2+9,_/2+5),e.stroke(),e.beginPath(),e.moveTo(_/2+10,_/2+8),e.lineTo(_/2+10,_/2+11),e.stroke(),e.closePath()}function drawBell(e,T,t,_){e.translate(T-_/2,t-_/2),e.oval(_/2,_/2,_/1,_-5),e.fillStyle="#fff200",e.fill(),e.beginPath(),e.rect(4,_-_/2.5-3,_-8,_/2.5-1),e.fill(),e.fillStyle="#52c4cc",e.beginPath(),e.rect(6,_-6,_-12,5),e.fill(),e.fillStyle="#8c8c8c",e.beginPath(),e.rect(_/2,_-6,5,5),e.fill(),e.closePath(),e.strokeStyle="#bbb",e.lineWidth="2",e.beginPath(),e.moveTo(15,7),e.arcTo(8,7,8,30,9),e.stroke(),e.closePath()}function drawGalboss(e,T,t,_){e.translate(T-_/2,t-_/2+1),e.strokeStyle="#868df5",e.lineWidth="5",e.beginPath(),e.moveTo(_/2,_/2+_/4),e.arcTo(_-1,_/2+4,_-1,_/2+1,_/3),e.lineTo(_-1,4),e.stroke(),e.closePath(),e.beginPath(),e.moveTo(_/2,_/2+_/4),e.arcTo(1,_/2+4,1,_/2+1,_/3),e.lineTo(1,4),e.stroke(),e.closePath(),e.strokeStyle="#ffff00",e.lineWidth="6",e.beginPath(),e.moveTo(_/2,_/2-2),e.lineTo(_/2,_),e.stroke(),e.fillStyle="#ffff00",e.beginPath(),e.arc(_/2,_/3.5,_/2.5,0,1*Math.PI),e.fill(),e.closePath(),e.strokeStyle="#000",e.lineWidth="3",e.beginPath(),e.moveTo(_/2-_/6,_/2+1),e.lineTo(_/2-_/6,_),e.stroke(),e.beginPath(),e.moveTo(_/2+_/6,_/2+1),e.lineTo(_/2+_/6,_),e.stroke(),e.strokeStyle="#ff3f3f",e.lineWidth="4",e.beginPath(),e.moveTo(_/2,_/2),e.lineTo(_/2,2),e.stroke(),e.moveTo(_/2+1,2),e.lineTo(_/2-8,_/2-_/6),e.stroke(),e.moveTo(_/2-1,2),e.lineTo(_/2+8,_/2-_/6),e.stroke(),e.closePath()}function drawMelon(e,T,t,_){e.translate(T-_/2,t-_/2),e.fillStyle="#198122",e.beginPath(),e.moveTo(_/2,_/6),e.arc(_/2,_/6,_/1.15,1.1,2.5,!0),e.fill(),e.closePath(),e.beginPath(),e.fillStyle="#ACFB77",e.moveTo(_/2,_/6),e.arc(_/2,_/6,_/1.3,1.1,2.5,!0),e.fill(),e.closePath(),e.beginPath(),e.fillStyle="#F92F2F",e.moveTo(_/2,_/6),e.arc(_/2,_/6,_/1.7,1.1,2.5,!0),e.fill(),e.closePath();var o=_/23;e.beginPath(),e.fillStyle="black",e.moveTo(12*o,9*o),e.arc(12*o,9*o,_/12,1.1,2.5,!0),e.moveTo(13*o,12*o),e.arc(13*o,12*o,_/12,1.1,2.5,!0),e.moveTo(10.5*o,12*o),e.arc(10.5*o,12*o,_/12,1.1,2.5,!0),e.fill(),e.closePath()}function drawApple(e,T,t,_){e.translate(T-_/2,t-_/2-2),e.fillStyle="#ff0000",e.beginPath(),e.arc(_/2,_/2+_/9,_/2.1,2*Math.PI,2*-Math.PI,!0),e.fill(),e.closePath(),e.fillStyle="#ff0000",e.beginPath(),e.arc(9,_-3,_/4.5,2*Math.PI,2*-Math.PI,!0),e.arc(_-8,_-3,_/4.5,2*Math.PI,2*-Math.PI,!0),e.fill(),e.closePath(),e.fillStyle="black",e.beginPath(),e.arc(_/2,_/6,_/7,2*Math.PI,2*-Math.PI,!0),e.fill(),e.closePath();var o=_/23;e.strokeStyle="#24da1c",e.lineWidth=2,e.beginPath(),e.beginPath(),e.moveTo(13*o+2,_/9+4),e.lineTo(13*o-_/4,_/9+1),e.stroke(),e.beginPath(),e.moveTo(13*o+2,_/9+4),e.lineTo(13*o-_/2.5,_/9+3),e.stroke(),e.strokeStyle="#bbb",e.lineWidth="2",e.beginPath(),e.moveTo(12,11),e.arcTo(5,11,5,30,7),e.stroke(),e.closePath()}function drawOrange(e,T,t,_){e.translate(T-_/2,t-_/2-1),e.fillStyle="#fcb424",e.beginPath(),e.arc(_/2,_/2+_/9,_/2.2,2*Math.PI,2*-Math.PI,!0),e.fill(),e.closePath(),e.fillStyle="black",e.beginPath(),e.arc(_/2,_/6,_/7,2*Math.PI,2*-Math.PI,!0),e.fill(),e.closePath();var o=_/23;e.strokeStyle="#24da1c",e.lineWidth=2.5,e.beginPath(),e.moveTo(_/2,_/3),e.lineTo(_/2,_/8),e.lineTo(9*o,_/9),e.stroke(),e.beginPath(),e.moveTo(9*o,_/9),e.lineTo(9*o+_/3,_/9-2),e.stroke(),e.closePath()}function drawStrawberry(e,T,t,_){e.translate(T-_/2,t-_/2+2),e.beginPath(),e.fillStyle="#ff0000",e.moveTo(_/2,_-_/18),e.bezierCurveTo(0,_/1.3,0,-_/9,_/2,_/6),e.moveTo(_/2,_-_/18),e.bezierCurveTo(_,_/1.3,_,-_/9,_/2,_/6),e.fill(),e.closePath(),e.fillStyle="white",e.fillRect(_/4,_/3,_/18,_/16),e.fillRect(_/2,_/4,_/18,_/16),e.fillRect(_-_/3.5,_/2.4,_/18,_/16),e.fillRect(_-_/2.2,_/2,_/18,_/16),e.fillRect(_/2.6,_/1.3,_/18,_/16),e.fillRect(_/3,_/1.8,_/18,_/16),e.fillRect(_/1.6,_/1.4,_/18,_/16),e.beginPath(),e.fillStyle="#24DA1D";var o=_/23;e.moveTo(6*o,2*o),e.lineTo(1*o,8*o),e.lineTo(6*o,6*o),e.lineTo(11*o,11*o),e.lineTo(16*o,6*o),e.lineTo(21*o,8*o),e.lineTo(17*o,2*o),e.moveTo(_/2,2*o),e.lineTo(8*o,0*o),e.lineTo(15*o,0*o),e.lineTo(_/2,2*o),e.fill(),e.closePath()}function drawCherry(e,T,t,_){e.translate(T-_/2,t-_/2+1),e.beginPath(),e.fillStyle="#ff0000",e.arc(_/8,_-_/2.8,_/4,2*Math.PI,2*-Math.PI,!0),e.arc(_-_/3,_-_/4,_/4,2*Math.PI,2*-Math.PI,!0),e.fill(),e.closePath(),e.beginPath(),e.fillStyle="#670303",e.arc(_/7.2,_-_/2.25,_/14,2*Math.PI,2*-Math.PI,!0),e.arc(_-_/3,_-_/3,_/14,2*Math.PI,2*-Math.PI,!0),e.fill(),e.closePath(),e.beginPath(),e.strokeStyle="#959817",e.lineWidth=2,e.moveTo(_/8,_-_/2),e.bezierCurveTo(_/6,_/1.5,_/7,_/4,_-_/4,_/8),e.moveTo(_-_/2.5,_-_/3),e.bezierCurveTo(_/1.3,_/1.5,_/3,_/2.5,_-_/4,_/8),e.stroke(),e.closePath(),e.fillStyle="#959817",e.fillRect(_-_/3,_/12,_/9,_/9),e.closePath()}var PACMAN_DIRECTION=3,PACMAN_DIRECTION_TRY=-1,PACMAN_DIRECTION_TRY_TIMER=null,PACMAN_DIRECTION_TRY_CANCEL=1e3,PACMAN_POSITION_X=276,PACMAN_POSITION_Y=416,PACMAN_POSITION_STEP=2,PACMAN_MOUNTH_STATE=3,PACMAN_MOUNTH_STATE_MAX=6,PACMAN_SIZE=16,PACMAN_MOVING=!1,PACMAN_MOVING_TIMER=-1,PACMAN_MOVING_SPEED=15,PACMAN_CANVAS_CONTEXT=null,PACMAN_EAT_GAP=15,PACMAN_GHOST_GAP=20,PACMAN_FRUITS_GAP=15,PACMAN_KILLING_TIMER=-1,PACMAN_KILLING_SPEED=70,PACMAN_RETRY_SPEED=2100,PACMAN_DEAD=!1;function initPacman(){var e=document.getElementById("canvas-pacman");e.setAttribute("width","550"),e.setAttribute("height","550"),e.getContext&&(PACMAN_CANVAS_CONTEXT=e.getContext("2d"))}function resetPacman(){stopPacman(),PACMAN_DIRECTION=3,PACMAN_DIRECTION_TRY=-1,PACMAN_DIRECTION_TRY_TIMER=null,PACMAN_POSITION_X=276,PACMAN_POSITION_Y=416,PACMAN_MOUNTH_STATE=3,PACMAN_MOVING=!1,PACMAN_MOVING_TIMER=-1,PACMAN_KILLING_TIMER=-1,PACMAN_DEAD=!1,PACMAN_SUPER=!1}function getPacmanCanevasContext(){return PACMAN_CANVAS_CONTEXT}function stopPacman(){-1!=PACMAN_MOVING_TIMER&&(clearInterval(PACMAN_MOVING_TIMER),PACMAN_MOVING_TIMER=-1,PACMAN_MOVING=!1),-1!=PACMAN_KILLING_TIMER&&(clearInterval(PACMAN_KILLING_TIMER),PACMAN_KILLING_TIMER=-1)}function pausePacman(){null!=PACMAN_DIRECTION_TRY_TIMER&&PACMAN_DIRECTION_TRY_TIMER.pause(),-1!=PACMAN_MOVING_TIMER&&(clearInterval(PACMAN_MOVING_TIMER),PACMAN_MOVING_TIMER=-1,PACMAN_MOVING=!1)}function resumePacman(){null!=PACMAN_DIRECTION_TRY_TIMER&&PACMAN_DIRECTION_TRY_TIMER.resume(),movePacman()}function tryMovePacmanCancel(){null!=PACMAN_DIRECTION_TRY_TIMER&&(PACMAN_DIRECTION_TRY_TIMER.cancel(),PACMAN_DIRECTION_TRY=-1,PACMAN_DIRECTION_TRY_TIMER=null)}function tryMovePacman(e){PACMAN_DIRECTION_TRY=e,PACMAN_DIRECTION_TRY_TIMER=new Timer("tryMovePacmanCancel()",PACMAN_DIRECTION_TRY_CANCEL)}function movePacman(e){!1===PACMAN_MOVING&&(PACMAN_MOVING=!0,drawPacman(),PACMAN_MOVING_TIMER=setInterval("movePacman()",PACMAN_MOVING_SPEED));var T=e,t=!1;if(T||-1==PACMAN_DIRECTION_TRY||(T=PACMAN_DIRECTION_TRY),T&&PACMAN_DIRECTION===T)e&&PACMAN_DIRECTION===e&&tryMovePacmanCancel();else if(T&&(canMovePacman(T)?((PACMAN_DIRECTION+1===T||PACMAN_DIRECTION-1===T||PACMAN_DIRECTION+1===T||4===PACMAN_DIRECTION&&1===T||1===PACMAN_DIRECTION&&4===T)&&(t=!0),PACMAN_DIRECTION=T,tryMovePacmanCancel()):(T!==PACMAN_DIRECTION_TRY&&tryMovePacmanCancel(),-1===PACMAN_DIRECTION_TRY&&tryMovePacman(T))),canMovePacman(PACMAN_DIRECTION)){erasePacman(),PACMAN_MOUNTH_STATE<PACMAN_MOUNTH_STATE_MAX?PACMAN_MOUNTH_STATE++:PACMAN_MOUNTH_STATE=0;var _=0;t&&(_=6),1===PACMAN_DIRECTION?PACMAN_POSITION_X+=PACMAN_POSITION_STEP+_:2===PACMAN_DIRECTION?PACMAN_POSITION_Y+=PACMAN_POSITION_STEP+_:3===PACMAN_DIRECTION?PACMAN_POSITION_X-=PACMAN_POSITION_STEP+_:4===PACMAN_DIRECTION&&(PACMAN_POSITION_Y-=PACMAN_POSITION_STEP+_),2===PACMAN_POSITION_X&&258===PACMAN_POSITION_Y?(PACMAN_POSITION_X=548,PACMAN_POSITION_Y=258):548===PACMAN_POSITION_X&&258===PACMAN_POSITION_Y&&(PACMAN_POSITION_X=2,PACMAN_POSITION_Y=258),drawPacman(),0!==PACMAN_MOUNTH_STATE&&3!==PACMAN_MOUNTH_STATE||(testBubblesPacman(),testGhostsPacman(),testFruitsPacman())}else stopPacman()}function canMovePacman(e){var T=PACMAN_POSITION_X,t=PACMAN_POSITION_Y;if(276===T&&204===t&&2===e)return!1;1===e?T+=PACMAN_POSITION_STEP:2===e?t+=PACMAN_POSITION_STEP:3===e?T-=PACMAN_POSITION_STEP:4===e&&(t-=PACMAN_POSITION_STEP);for(var _=0,o=PATHS.length;_<o;_++){var a=PATHS[_].split("-"),n=a[0].split(","),I=a[1].split(","),s=n[0],r=n[1],E=I[0],S=I[1];if(T>=s&&T<=E&&t>=r&&t<=S)return!0}return!1}function drawPacman(){var e=getPacmanCanevasContext();e.fillStyle="#fff200",e.beginPath();var T=0,t=2*Math.PI,_=PACMAN_POSITION_X,o=PACMAN_POSITION_Y;1===PACMAN_DIRECTION?(T=(.35-.05*PACMAN_MOUNTH_STATE)*Math.PI,t=(1.65+.05*PACMAN_MOUNTH_STATE)*Math.PI,_-=8):2===PACMAN_DIRECTION?(T=(.85-.05*PACMAN_MOUNTH_STATE)*Math.PI,t=(.15+.05*PACMAN_MOUNTH_STATE)*Math.PI,o-=8):3===PACMAN_DIRECTION?(T=(1.35-.05*PACMAN_MOUNTH_STATE)*Math.PI,t=(.65+.05*PACMAN_MOUNTH_STATE)*Math.PI,_+=8):4===PACMAN_DIRECTION&&(T=(1.85-.05*PACMAN_MOUNTH_STATE)*Math.PI,t=(1.15+.05*PACMAN_MOUNTH_STATE)*Math.PI,o+=8),e.arc(PACMAN_POSITION_X,PACMAN_POSITION_Y,PACMAN_SIZE,T,t,!1),e.lineTo(_,o),e.fill(),e.closePath()}function erasePacman(){getPacmanCanevasContext().clearRect(PACMAN_POSITION_X-2-PACMAN_SIZE,PACMAN_POSITION_Y-2-PACMAN_SIZE,2*PACMAN_SIZE+5,2*PACMAN_SIZE+5)}function killPacman(){playDieSound(),LOCK=!0,PACMAN_DEAD=!0,stopPacman(),stopGhosts(),pauseTimes(),stopBlinkSuperBubbles(),PACMAN_KILLING_TIMER=setInterval("killingPacman()",PACMAN_KILLING_SPEED)}function killingPacman(){PACMAN_MOUNTH_STATE>-12?(erasePacman(),PACMAN_MOUNTH_STATE--,drawPacman()):(clearInterval(PACMAN_KILLING_TIMER),PACMAN_KILLING_TIMER=-1,erasePacman(),LIFES>0?(lifes(-1),setTimeout("retry()",PACMAN_RETRY_SPEED)):gameover())}function testGhostsPacman(){testGhostPacman("blinky"),testGhostPacman("pinky"),testGhostPacman("inky"),testGhostPacman("clyde")}function testGhostPacman(ghost){eval("var positionX = GHOST_"+ghost.toUpperCase()+"_POSITION_X"),eval("var positionY = GHOST_"+ghost.toUpperCase()+"_POSITION_Y"),positionX<=PACMAN_POSITION_X+PACMAN_GHOST_GAP&&positionX>=PACMAN_POSITION_X-PACMAN_GHOST_GAP&&positionY<=PACMAN_POSITION_Y+PACMAN_GHOST_GAP&&positionY>=PACMAN_POSITION_Y-PACMAN_GHOST_GAP&&(eval("var state = GHOST_"+ghost.toUpperCase()+"_STATE"),0===state?killPacman():1===state&&startEatGhost(ghost))}function testFruitsPacman(){null!=FRUIT_CANCEL_TIMER&&FRUITS_POSITION_X<=PACMAN_POSITION_X+PACMAN_FRUITS_GAP&&FRUITS_POSITION_X>=PACMAN_POSITION_X-PACMAN_FRUITS_GAP&&FRUITS_POSITION_Y<=PACMAN_POSITION_Y+PACMAN_FRUITS_GAP&&FRUITS_POSITION_Y>=PACMAN_POSITION_Y-PACMAN_FRUITS_GAP&&eatFruit()}function testBubblesPacman(){for(var e={x:PACMAN_POSITION_X-PACMAN_SIZE/2,y:PACMAN_POSITION_Y-PACMAN_SIZE/2,width:2*PACMAN_SIZE,height:2*PACMAN_SIZE},T=0,t=BUBBLES_ARRAY.length;T<t;T++){var _=BUBBLES_ARRAY[T],o=_.split(";"),a=parseInt(o[0].split(",")[0]),n=parseInt(o[0].split(",")[1]);if(isPointInRect({x:a,y:n},e)){if("0"===o[4]){var I=o[3];eraseBubble(I,a,n),BUBBLES_ARRAY[T]=_.substr(0,_.length-1)+"1","s"===I?(setSuperBubbleOnXY(a,n,"1"),score(SCORE_SUPER_BUBBLE),playEatPillSound(),affraidGhosts()):(score(SCORE_BUBBLE),playEatingSound()),0===--BUBBLES_COUNTER&&win()}else stopEatingSound();return}}}var GHOST_BLINKY_CANVAS_CONTEXT=null,GHOST_BLINKY_POSITION_X=276,GHOST_BLINKY_POSITION_Y=204,GHOST_BLINKY_DIRECTION=1,GHOST_BLINKY_COLOR="#ed1b24",GHOST_BLINKY_MOVING_TIMER=-1,GHOST_BLINKY_MOVING=!1,GHOST_BLINKY_BODY_STATE=0,GHOST_BLINKY_STATE=0,GHOST_BLINKY_EAT_TIMER=null,GHOST_BLINKY_AFFRAID_TIMER=null,GHOST_BLINKY_AFFRAID_STATE=0,GHOST_BLINKY_TUNNEL=!1,GHOST_PINKY_CANVAS_CONTEXT=null,GHOST_PINKY_POSITION_X=276,GHOST_PINKY_POSITION_Y=258,GHOST_PINKY_DIRECTION=2,GHOST_PINKY_COLOR="#feaec9",GHOST_PINKY_MOVING_TIMER=-1,GHOST_PINKY_MOVING=!1,GHOST_PINKY_BODY_STATE=1,GHOST_PINKY_STATE=0,GHOST_PINKY_EAT_TIMER=null,GHOST_PINKY_AFFRAID_TIMER=null,GHOST_PINKY_AFFRAID_STATE=0,GHOST_PINKY_TUNNEL=!1,GHOST_INKY_CANVAS_CONTEXT=null,GHOST_INKY_POSITION_X=238,GHOST_INKY_POSITION_Y=258,GHOST_INKY_DIRECTION=3,GHOST_INKY_COLOR="#4adecb",GHOST_INKY_MOVING_TIMER=-1,GHOST_INKY_MOVING=!1,GHOST_INKY_BODY_STATE=2,GHOST_INKY_STATE=0,GHOST_INKY_EAT_TIMER=null,GHOST_INKY_AFFRAID_TIMER=null,GHOST_INKY_AFFRAID_STATE=0,GHOST_INKY_TUNNEL=!1,GHOST_CLYDE_CANVAS_CONTEXT=null,GHOST_CLYDE_POSITION_X=314,GHOST_CLYDE_POSITION_Y=258,GHOST_CLYDE_DIRECTION=4,GHOST_CLYDE_COLOR="#f99c00",GHOST_CLYDE_MOVING_TIMER=-1,GHOST_CLYDE_MOVING=!1,GHOST_CLYDE_BODY_STATE=3,GHOST_CLYDE_STATE=0,GHOST_CLYDE_EAT_TIMER=null,GHOST_CLYDE_AFFRAID_TIMER=null,GHOST_CLYDE_AFFRAID_STATE=0,GHOST_CLYDE_TUNNEL=!1,GHOST_AFFRAID_COLOR="#2d3eff",GHOST_AFFRAID_FINISH_COLOR="#fff",GHOST_POSITION_STEP=2,GHOST_MOVING_SPEED=15,GHOST_TUNNEL_MOVING_SPEED=35,GHOST_AFFRAID_MOVING_SPEED=40,GHOST_EAT_MOVING_SPEED=6,GHOST_AFFRAID_TIME=8500,GHOST_EAT_TIME=5500,GHOST_BODY_STATE_MAX=6;function initGhosts(){initGhost("blinky"),initGhost("pinky"),initGhost("inky"),initGhost("clyde")}function initGhost(ghost){var canvas=document.getElementById("canvas-ghost-"+ghost);canvas.setAttribute("width","550"),canvas.setAttribute("height","550"),canvas.getContext&&eval("GHOST_"+ghost.toUpperCase()+'_CANVAS_CONTEXT = canvas.getContext("2d")')}function resetGhosts(){stopGhosts(),GHOST_BLINKY_POSITION_X=276,GHOST_BLINKY_POSITION_Y=204,GHOST_BLINKY_DIRECTION=1,GHOST_BLINKY_MOVING_TIMER=-1,GHOST_BLINKY_MOVING=!1,GHOST_BLINKY_BODY_STATE=0,GHOST_BLINKY_STATE=0,GHOST_BLINKY_EAT_TIMER=null,GHOST_BLINKY_AFFRAID_TIMER=null,GHOST_BLINKY_AFFRAID_STATE=0,GHOST_PINKY_POSITION_X=276,GHOST_PINKY_POSITION_Y=258,GHOST_PINKY_DIRECTION=2,GHOST_PINKY_MOVING_TIMER=-1,GHOST_PINKY_MOVING=!1,GHOST_PINKY_BODY_STATE=1,GHOST_PINKY_STATE=0,GHOST_PINKY_EAT_TIMER=null,GHOST_PINKY_AFFRAID_TIMER=null,GHOST_PINKY_AFFRAID_STATE=0,GHOST_INKY_POSITION_X=238,GHOST_INKY_POSITION_Y=258,GHOST_INKY_DIRECTION=3,GHOST_INKY_MOVING_TIMER=-1,GHOST_INKY_MOVING=!1,GHOST_INKY_BODY_STATE=2,GHOST_INKY_STATE=0,GHOST_INKY_EAT_TIMER=null,GHOST_INKY_AFFRAID_TIMER=null,GHOST_INKY_AFFRAID_STATE=0,GHOST_CLYDE_POSITION_X=314,GHOST_CLYDE_POSITION_Y=258,GHOST_CLYDE_DIRECTION=4,GHOST_CLYDE_MOVING_TIMER=-1,GHOST_CLYDE_MOVING=!1,GHOST_CLYDE_BODY_STATE=3,GHOST_CLYDE_STATE=0,GHOST_CLYDE_EAT_TIMER=null,GHOST_CLYDE_AFFRAID_TIMER=null,GHOST_CLYDE_AFFRAID_STATE=0}function getGhostCanevasContext(ghost){return eval("GHOST_"+ghost.toUpperCase()+"_CANVAS_CONTEXT")}function drawGhosts(){drawGhost("blinky"),drawGhost("pinky"),drawGhost("inky"),drawGhost("clyde")}function drawGhost(ghost){var ctx=getGhostCanevasContext(ghost);eval("GHOST_"+ghost.toUpperCase()+"_STATE === 0")?eval("ctx.fillStyle = GHOST_"+ghost.toUpperCase()+"_COLOR"):eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_STATE === 1")?eval("ctx.fillStyle = GHOST_AFFRAID_FINISH_COLOR"):eval("ctx.fillStyle = GHOST_AFFRAID_COLOR"),eval("drawHelperGhost(ctx, GHOST_"+ghost.toUpperCase()+"_POSITION_X, GHOST_"+ghost.toUpperCase()+"_POSITION_Y, GHOST_"+ghost.toUpperCase()+"_DIRECTION, GHOST_"+ghost.toUpperCase()+"_BODY_STATE, GHOST_"+ghost.toUpperCase()+"_STATE, GHOST_"+ghost.toUpperCase()+"_AFFRAID_STATE)"),ctx.closePath()}function affraidGhosts(){playWazaSound(),SCORE_GHOST_COMBO=200,affraidGhost("blinky"),affraidGhost("pinky"),affraidGhost("inky"),affraidGhost("clyde")}function affraidGhost(ghost){eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER !== null")&&(eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER.cancel()"),eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER = null")),eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_STATE = 0"),(eval("GHOST_"+ghost.toUpperCase()+"_STATE === 0")||eval("GHOST_"+ghost.toUpperCase()+"_STATE === 1"))&&(stopGhost(ghost),eval("GHOST_"+ghost.toUpperCase()+"_STATE = 1"),moveGhost(ghost),eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER = new Timer(\"cancelAffraidGhost('"+ghost+"')\", GHOST_AFFRAID_TIME)"))}function cancelAffraidGhost(ghost){eval("GHOST_"+ghost.toUpperCase()+"_STATE === 1")&&(eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER.cancel()"),eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER = null"),stopGhost(ghost),eval("GHOST_"+ghost.toUpperCase()+"_STATE = 0"),moveGhost(ghost),testStateGhosts())}function testStateGhosts(){1===GHOST_BLINKY_STATE||1===GHOST_PINKY_STATE||1===GHOST_INKY_STATE||1===GHOST_CLYDE_STATE?playWazaSound():-1===GHOST_BLINKY_STATE||-1===GHOST_PINKY_STATE||-1===GHOST_INKY_STATE||-1===GHOST_CLYDE_STATE?playGhostEatenSound():playSirenSound()}function startEatGhost(ghost){LOCK||(playEatGhostSound(),LOCK=!0,eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER !== null")&&(eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER.cancel()"),eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER = null")),score(SCORE_GHOST_COMBO,ghost),pauseGhosts(),pausePacman(),setTimeout("eatGhost('"+ghost+"')",600))}function eatGhost(ghost){playGhostEatenSound(),eval("GHOST_"+ghost.toUpperCase()+"_STATE === 1")&&($("#board span.combo").remove(),eval("GHOST_"+ghost.toUpperCase()+"_STATE = -1"),eval("GHOST_"+ghost.toUpperCase()+"_EAT_TIMER = new Timer(\"cancelEatGhost('"+ghost+"')\", GHOST_EAT_TIME)"),eval("GHOST_"+ghost.toUpperCase()+"_EAT_TIMER.pause()")),resumeGhosts(),resumePacman(),LOCK=!1}function cancelEatGhost(ghost){eval("GHOST_"+ghost.toUpperCase()+"_STATE === -1")&&(eval("GHOST_"+ghost.toUpperCase()+"_EAT_TIMER = null"),stopGhost(ghost),eval("GHOST_"+ghost.toUpperCase()+"_STATE = 0"),moveGhost(ghost),testStateGhosts())}function moveGhosts(){moveGhost("blinky"),moveGhost("pinky"),moveGhost("inky"),moveGhost("clyde")}function moveGhost(ghost){if(eval("GHOST_"+ghost.toUpperCase()+"_MOVING === false")){eval("GHOST_"+ghost.toUpperCase()+"_MOVING = true;");var speed=-1;speed=eval("GHOST_"+ghost.toUpperCase()+"_STATE === 1")?GHOST_AFFRAID_MOVING_SPEED:eval("GHOST_"+ghost.toUpperCase()+"_STATE === 0")?eval("GHOST_"+ghost.toUpperCase()+"_TUNNEL === false")?GHOST_MOVING_SPEED:GHOST_TUNNEL_MOVING_SPEED:GHOST_EAT_MOVING_SPEED,eval("GHOST_"+ghost.toUpperCase()+"_MOVING_TIMER = setInterval(\"moveGhost('"+ghost+"')\", "+speed+");")}else{if(changeDirection(ghost),eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER !== null")){var remain=eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER.remain();");remain>=2500&&remain<3e3||remain>=1500&&remain<=2e3||remain>=500&&remain<=1e3||remain<0?eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_STATE = 1;"):(remain>2e3&&remain<2500||remain>1e3&&remain<1500||remain>=0&&remain<500)&&eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_STATE = 0;")}canMoveGhost(ghost)?(eraseGhost(ghost),eval("GHOST_"+ghost.toUpperCase()+"_BODY_STATE < GHOST_BODY_STATE_MAX")?eval("GHOST_"+ghost.toUpperCase()+"_BODY_STATE ++;"):eval("GHOST_"+ghost.toUpperCase()+"_BODY_STATE = 0;"),eval("GHOST_"+ghost.toUpperCase()+"_DIRECTION === 1")?eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X += GHOST_POSITION_STEP;"):eval("GHOST_"+ghost.toUpperCase()+"_DIRECTION === 2")?eval("GHOST_"+ghost.toUpperCase()+"_POSITION_Y += GHOST_POSITION_STEP;"):eval("GHOST_"+ghost.toUpperCase()+"_DIRECTION === 3")?eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X -= GHOST_POSITION_STEP;"):eval("GHOST_"+ghost.toUpperCase()+"_DIRECTION === 4")&&eval("GHOST_"+ghost.toUpperCase()+"_POSITION_Y -= GHOST_POSITION_STEP;"),eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X === 2")&&eval("GHOST_"+ghost.toUpperCase()+"_POSITION_Y === 258")?(eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X = 548;"),eval("GHOST_"+ghost.toUpperCase()+"_POSITION_Y = 258;")):eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X === 548")&&eval("GHOST_"+ghost.toUpperCase()+"_POSITION_Y === 258")&&(eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X = 2;"),eval("GHOST_"+ghost.toUpperCase()+"_POSITION_Y = 258;")),drawGhost(ghost),eval("GHOST_"+ghost.toUpperCase()+"_BODY_STATE === 3")&&eval("GHOST_"+ghost.toUpperCase()+"_STATE != -1")&&(PACMAN_MOVING||testGhostPacman(ghost),testGhostTunnel(ghost))):eval("GHOST_"+ghost.toUpperCase()+"_DIRECTION = oneDirection();")}}function testGhostTunnel(ghost){eval("GHOST_"+ghost.toUpperCase()+"_STATE === 0")&&(isInTunnel(ghost)&&eval("GHOST_"+ghost.toUpperCase()+"_TUNNEL === false")?(stopGhost(ghost),eval("GHOST_"+ghost.toUpperCase()+"_TUNNEL = true"),moveGhost(ghost)):!isInTunnel(ghost)&&eval("GHOST_"+ghost.toUpperCase()+"_TUNNEL === true")&&(stopGhost(ghost),eval("GHOST_"+ghost.toUpperCase()+"_TUNNEL = false"),moveGhost(ghost)))}function isInTunnel(ghost){return!!(eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X >= 2")&&eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X <= 106")&&eval("GHOST_"+ghost.toUpperCase()+"_POSITION_Y === 258"))||!!(eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X >= 462")&&eval("GHOST_"+ghost.toUpperCase()+"_POSITION_X <= 548")&&eval("GHOST_"+ghost.toUpperCase()+"_POSITION_Y === 258"))||void 0}function changeDirection(ghost){eval("var direction = GHOST_"+ghost.toUpperCase()+"_DIRECTION"),eval("var state = GHOST_"+ghost.toUpperCase()+"_STATE"),eval("var ghostX = GHOST_"+ghost.toUpperCase()+"_POSITION_X"),eval("var ghostY = GHOST_"+ghost.toUpperCase()+"_POSITION_Y");var tryDirection=oneDirection();if(0===state||1===state){if(276!=ghostX&&258!=ghostY){var pacmanX=PACMAN_POSITION_X,pacmanY=PACMAN_POSITION_Y,axe=oneAxe();if("blinky"===ghost){var nothing=whatsYourProblem();nothing<6&&(tryDirection=getRightDirection(axe,ghostX,ghostY,pacmanX,pacmanY),canMoveGhost(ghost,tryDirection)&&direction!=tryDirection-2&&direction!=tryDirection+2||(axe++,axe>2&&(axe=1),tryDirection=getRightDirection(axe,ghostX,ghostY,pacmanX,pacmanY)))}else if("pinky"===ghost){var nothing=whatsYourProblem();nothing<3&&(tryDirection=getRightDirection(axe,ghostX,ghostY,pacmanX,pacmanY),canMoveGhost(ghost,tryDirection)&&direction!=tryDirection-2&&direction!=tryDirection+2||(axe++,axe>2&&(axe=1),tryDirection=getRightDirection(axe,ghostX,ghostY,pacmanX,pacmanY)),tryDirection=reverseDirection(tryDirection))}else if("inky"===ghost){var good=anyGoodIdea();good<3&&(tryDirection=getRightDirection(axe,ghostX,ghostY,pacmanX,pacmanY),canMoveGhost(ghost,tryDirection)&&direction!=tryDirection-2&&direction!=tryDirection+2||(axe++,axe>2&&(axe=1),tryDirection=getRightDirection(axe,ghostX,ghostY,pacmanX,pacmanY)))}}1===state&&(tryDirection=reverseDirection(tryDirection))}else{var axe=oneAxe();tryDirection=getRightDirectionForHome(axe,ghostX,ghostY),canMoveGhost(ghost,tryDirection)&&direction!=tryDirection-2&&direction!=tryDirection+2||(axe++,axe>2&&(axe=1),tryDirection=getRightDirectionForHome(axe,ghostX,ghostY))}canMoveGhost(ghost,tryDirection)&&direction!=tryDirection-2&&direction!=tryDirection+2&&eval("GHOST_"+ghost.toUpperCase()+"_DIRECTION = tryDirection")}function getRightDirectionForHome(e,T,t){return 204===t&&276===T?2:276===T&&258===t?oneDirectionX():1===e?T>276?3:1:t>204?4:2}function getRightDirection(e,T,t,_,o){return 1===e?T>_?3:1:t>o?4:2}function reverseDirection(e){return e>2?e-2:e+2}function eraseGhost(ghost){var ctx=getGhostCanevasContext(ghost);eval("ctx.clearRect(GHOST_"+ghost.toUpperCase()+"_POSITION_X - 17, GHOST_"+ghost.toUpperCase()+"_POSITION_Y - 17, 34, 34)")}function eraseGhosts(){eraseGhost("blinky"),eraseGhost("pinky"),eraseGhost("inky"),eraseGhost("clyde")}function canMoveGhost(ghost,direction){if(direction||eval("var direction = GHOST_"+ghost.toUpperCase()+"_DIRECTION"),eval("var positionX = GHOST_"+ghost.toUpperCase()+"_POSITION_X"),eval("var positionY = GHOST_"+ghost.toUpperCase()+"_POSITION_Y"),eval("var state = GHOST_"+ghost.toUpperCase()+"_STATE"),276===positionX&&204===positionY&&2===direction&&0===state)return!1;1===direction?positionX+=GHOST_POSITION_STEP:2===direction?positionY+=GHOST_POSITION_STEP:3===direction?positionX-=GHOST_POSITION_STEP:4===direction&&(positionY-=GHOST_POSITION_STEP);for(var i=0,imax=PATHS.length;i<imax;i++){var p=PATHS[i],startX=p.split("-")[0].split(",")[0],startY=p.split("-")[0].split(",")[1],endX=p.split("-")[1].split(",")[0],endY=p.split("-")[1].split(",")[1];if(positionX>=startX&&positionX<=endX&&positionY>=startY&&positionY<=endY)return!0}return!1}function oneDirection(){return Math.floor(4*Math.random()+1)}function oneDirectionX(){var e=oneDirection();return 4!==e&&2!==e||(e-=1),e}function oneDirectionY(){var e=oneDirection();return 3!==e&&1!==e||(e-=1),e}function stopGhost(ghost){eval("GHOST_"+ghost.toUpperCase()+"_STATE === 1")?(eval("if(GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER !== null) GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER.cancel()"),eval("GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER = null"),eval("GHOST_"+ghost.toUpperCase()+"_STATE = 0")):eval("GHOST_"+ghost.toUpperCase()+"_STATE === -1")&&(eval("if(GHOST_"+ghost.toUpperCase()+"_EAT_TIMER !== null) GHOST_"+ghost.toUpperCase()+"_EAT_TIMER.cancel()"),eval("GHOST_"+ghost.toUpperCase()+"_EAT_TIMER = null"),eval("GHOST_"+ghost.toUpperCase()+"_STATE = 0")),eval("GHOST_"+ghost.toUpperCase()+"_MOVING_TIMER != -1")&&(eval("clearInterval(GHOST_"+ghost.toUpperCase()+"_MOVING_TIMER)"),eval("GHOST_"+ghost.toUpperCase()+"_MOVING_TIMER = -1"),eval("GHOST_"+ghost.toUpperCase()+"_MOVING = false"))}function stopGhosts(){stopGhost("blinky"),stopGhost("pinky"),stopGhost("inky"),stopGhost("clyde")}function pauseGhost(ghost){eval("GHOST_"+ghost.toUpperCase()+"_STATE === 1")?eval("if(GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER !== null) GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER.pause()"):eval("GHOST_"+ghost.toUpperCase()+"_STATE === -1")&&eval("if(GHOST_"+ghost.toUpperCase()+"_EAT_TIMER !== null) GHOST_"+ghost.toUpperCase()+"_EAT_TIMER.pause()"),eval("GHOST_"+ghost.toUpperCase()+"_MOVING_TIMER != -1")&&(eval("clearInterval(GHOST_"+ghost.toUpperCase()+"_MOVING_TIMER)"),eval("GHOST_"+ghost.toUpperCase()+"_MOVING_TIMER = -1"),eval("GHOST_"+ghost.toUpperCase()+"_MOVING = false"))}function pauseGhosts(){pauseGhost("blinky"),pauseGhost("pinky"),pauseGhost("inky"),pauseGhost("clyde")}function resumeGhost(ghost){eval("GHOST_"+ghost.toUpperCase()+"_STATE === 1")?eval("if(GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER !== null) GHOST_"+ghost.toUpperCase()+"_AFFRAID_TIMER.resume()"):eval("GHOST_"+ghost.toUpperCase()+"_STATE === -1")&&eval("if(GHOST_"+ghost.toUpperCase()+"_EAT_TIMER !== null) GHOST_"+ghost.toUpperCase()+"_EAT_TIMER.resume()"),moveGhost(ghost)}function resumeGhosts(){resumeGhost("blinky"),resumeGhost("pinky"),resumeGhost("inky"),resumeGhost("clyde")}function drawHelperGhost(e,T,t,_,o,a,n){-1!=a&&(e.beginPath(),e.moveTo(T-15,t+16),e.lineTo(T-15,t+16-18),e.bezierCurveTo(T-15,t+16-26,T-15+6,t+16-32,T-15+14,t+16-32),e.bezierCurveTo(T-15+22,t+16-32,T-15+28,t+16-26,T-15+28,t+16-18),e.lineTo(T-15+28,t+16),o<4?(e.lineTo(T-15+23.333,t+16-5.333),e.lineTo(T-15+18.666,t+16),e.lineTo(T-15+14,t+16-5.333),e.lineTo(T-15+9.333,t+16),e.lineTo(T-15+4.666,t+16-5.333)):(e.lineTo(T-15+24.333,t+16-5.333),e.lineTo(T-15+20.666,t+16),e.lineTo(T-15+17.333,t+16-5.333),e.lineTo(T-15+12.666,t+16),e.lineTo(T-15+9,t+16-5.333),e.lineTo(T-15+5.333,t+16),e.lineTo(T-15+2.666,t+16-5.333)),e.lineTo(T-15,t+16),e.fill());var I=0,s=0;4===_?s=-5:1===_?I=2:2===_?(s=0,s=5):3===_&&(I=-3),0===a||-1===a?(e.fillStyle="white",e.beginPath(),e.moveTo(T-15+8+I,t+16-24+s),e.bezierCurveTo(T-15+5+I,t+16-24+s,T-15+4+I,t+16-21+s,T-15+4+I,t+16-19+s),e.bezierCurveTo(T-15+4+I,t+16-17+s,T-15+5+I,t+16-14+s,T-15+8+I,t+16-14+s),e.bezierCurveTo(T-15+11+I,t+16-14+s,T-15+12+I,t+16-17+s,T-15+12+I,t+16-19+s),e.bezierCurveTo(T-15+12+I,t+16-21+s,T-15+11+I,t+16-24+s,T-15+8+I,t+16-24+s),e.moveTo(T-15+20+I,t+16-24+s),e.bezierCurveTo(T-15+17+I,t+16-24+s,T-15+16+I,t+16-21+s,T-15+16+I,t+16-19+s),e.bezierCurveTo(T-15+16+I,t+16-17+s,T-15+17+I,t+16-14+s,T-15+20+I,t+16-14+s),e.bezierCurveTo(T-15+23+I,t+16-14+s,T-15+24+I,t+16-17+s,T-15+24+I,t+16-19+s),e.bezierCurveTo(T-15+24+I,t+16-21+s,T-15+23+I,t+16-24+s,T-15+20+I,t+16-24+s),e.fill(),4===_?(s=-9,I=2):1===_?I=6:2===_&&(s=8,I=2),e.fillStyle="#0000fa",e.beginPath(),e.arc(T-15+18+I,t+16-18+s,2,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.arc(T-15+6+I,t+16-18+s,2,0,2*Math.PI,!0),e.fill()):(e.fillStyle=1===n?"#ee2933":"#e5bed0",e.beginPath(),e.arc(T-15+18,t+13-17,2,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.arc(T-15+10,t+13-17,2,0,2*Math.PI,!0),e.fill(),e.strokeStyle=1===n?"#ee2933":"#e5bed0",e.beginPath(),e.lineTo(T-14.333+24,t+6),e.lineTo(T-14.333+21,t+6-3),e.lineTo(T-14.333+17,t+6),e.lineTo(T-14.333+14,t+6-3),e.lineTo(T-14.333+10,t+6),e.lineTo(T-14.333+7,t+6-3),e.lineTo(T-14.333+3,t+6),e.stroke())}var HOME=!1,HOME_PRESENTATION_TIMER=-1,HOME_PRESENTATION_STATE=0,HOME_TRAILER_TIMER=-1,HOME_TRAILER_STATE=0,PACMAN_TRAILER_CANVAS_CONTEXT=null,PACMAN_TRAILER_DIRECTION=3,PACMAN_TRAILER_POSITION_X=600,PACMAN_TRAILER_POSITION_Y=25,PACMAN_TRAILER_POSITION_STEP=3,PACMAN_TRAILER_MOUNTH_STATE=3,PACMAN_TRAILER_MOUNTH_STATE_MAX=6,PACMAN_TRAILER_SIZE=16,GHOST_TRAILER_CANVAS_CONTEXT=null,GHOST_TRAILER_BODY_STATE_MAX=6,GHOST_TRAILER_POSITION_STEP=3,GHOST_BLINKY_TRAILER_POSITION_X=1e3,GHOST_BLINKY_TRAILER_POSITION_Y=25,GHOST_BLINKY_TRAILER_DIRECTION=3,GHOST_BLINKY_TRAILER_COLOR="#ed1b24",GHOST_BLINKY_TRAILER_BODY_STATE=0,GHOST_BLINKY_TRAILER_STATE=0,GHOST_PINKY_TRAILER_POSITION_X=1035,GHOST_PINKY_TRAILER_POSITION_Y=25,GHOST_PINKY_TRAILER_DIRECTION=3,GHOST_PINKY_TRAILER_COLOR="#feaec9",GHOST_PINKY_TRAILER_BODY_STATE=1,GHOST_PINKY_TRAILER_STATE=0,GHOST_INKY_TRAILER_POSITION_X=1070,GHOST_INKY_TRAILER_POSITION_Y=25,GHOST_INKY_TRAILER_DIRECTION=3,GHOST_INKY_TRAILER_COLOR="#4adecb",GHOST_INKY_TRAILER_BODY_STATE=2,GHOST_INKY_TRAILER_STATE=0,GHOST_CLYDE_TRAILER_POSITION_X=1105,GHOST_CLYDE_TRAILER_POSITION_Y=25,GHOST_CLYDE_TRAILER_DIRECTION=3,GHOST_CLYDE_TRAILER_COLOR="#f99c00",GHOST_CLYDE_TRAILER_BODY_STATE=3,GHOST_CLYDE_TRAILER_STATE=0;function initHome(){HOME=!0,GAMEOVER=!1,LOCK=!1,PACMAN_DEAD=!1,$("#panel").hide(),$("#home").show(),$("#home h3 em").append(" - "+(new Date).getFullYear()),$("#help").fadeOut("slow");var e=null,T=document.getElementById("canvas-home-title-pacman");T.setAttribute("width","115"),T.setAttribute("height","100"),T.getContext&&(e=T.getContext("2d"));var t=50,_=50;e.fillStyle="#fff200",e.beginPath(),e.arc(t,_,45,(.35-3*.05)*Math.PI,(1.65+3*.05)*Math.PI,!1),e.lineTo(t-10,_),e.fill(),e.closePath(),t=95,_=50,e.fillStyle="#dca5be",e.beginPath(),e.arc(t,_,10,0,2*Math.PI,!1),e.fill(),e.closePath(),(T=document.getElementById("canvas-presentation-blinky")).setAttribute("width","50"),T.setAttribute("height","50"),T.getContext&&(e=T.getContext("2d")),e.fillStyle=GHOST_BLINKY_COLOR,drawHelperGhost(e,25,25,1,0,0,0),(T=document.getElementById("canvas-presentation-pinky")).setAttribute("width","50"),T.setAttribute("height","50"),T.getContext&&(e=T.getContext("2d")),e.fillStyle=GHOST_PINKY_COLOR,drawHelperGhost(e,25,25,1,0,0,0),(T=document.getElementById("canvas-presentation-inky")).setAttribute("width","50"),T.setAttribute("height","50"),T.getContext&&(e=T.getContext("2d")),e.fillStyle=GHOST_INKY_COLOR,drawHelperGhost(e,25,25,1,0,0,0),(T=document.getElementById("canvas-presentation-clyde")).setAttribute("width","50"),T.setAttribute("height","50"),T.getContext&&(e=T.getContext("2d")),e.fillStyle=GHOST_CLYDE_COLOR,drawHelperGhost(e,25,25,1,0,0,0),startPresentation()}function startPresentation(){$("#presentation *").hide(),-1===HOME_PRESENTATION_TIMER&&(HOME_PRESENTATION_STATE=0,HOME_PRESENTATION_TIMER=setInterval("nextSequencePresentation()",500))}function stopPresentation(){-1!=HOME_PRESENTATION_TIMER&&($("#presentation *").hide(),HOME_PRESENTATION_STATE=0,clearInterval(HOME_PRESENTATION_TIMER),HOME_PRESENTATION_TIMER=-1)}function nextSequencePresentation(){0===HOME_PRESENTATION_STATE?$("#presentation-titles").show():2===HOME_PRESENTATION_STATE?$("#canvas-presentation-blinky").show():4===HOME_PRESENTATION_STATE?$("#presentation-character-blinky").show():5===HOME_PRESENTATION_STATE?$("#presentation-name-blinky").show():6===HOME_PRESENTATION_STATE?$("#canvas-presentation-pinky").show():8===HOME_PRESENTATION_STATE?$("#presentation-character-pinky").show():9===HOME_PRESENTATION_STATE?$("#presentation-name-pinky").show():10===HOME_PRESENTATION_STATE?$("#canvas-presentation-inky").show():12===HOME_PRESENTATION_STATE?$("#presentation-character-inky").show():13===HOME_PRESENTATION_STATE?$("#presentation-name-inky").show():14===HOME_PRESENTATION_STATE?$("#canvas-presentation-clyde").show():16===HOME_PRESENTATION_STATE?$("#presentation-character-clyde").show():17===HOME_PRESENTATION_STATE&&$("#presentation-name-clyde").show(),17===HOME_PRESENTATION_STATE?(clearInterval(HOME_PRESENTATION_TIMER),HOME_PRESENTATION_TIMER=-1,startTrailer()):HOME_PRESENTATION_STATE++}function startTrailer(){var e=document.getElementById("trailer");e.setAttribute("width","500"),e.setAttribute("height","50"),e.getContext&&(PACMAN_TRAILER_CANVAS_CONTEXT=e.getContext("2d")),-1===HOME_TRAILER_TIMER&&(HOME_TRAILER_STATE=0,HOME_TRAILER_TIMER=setInterval("nextSequenceTrailer()",20))}function stopTrailer(){-1!=HOME_TRAILER_TIMER&&($("#presentation *").hide(),HOME_TRAILER_STATE=0,clearInterval(HOME_TRAILER_TIMER),HOME_TRAILER_TIMER=-1)}function nextSequenceTrailer(){erasePacmanTrailer(),eraseGhostsTrailer(),PACMAN_TRAILER_MOUNTH_STATE<PACMAN_TRAILER_MOUNTH_STATE_MAX?PACMAN_TRAILER_MOUNTH_STATE++:PACMAN_TRAILER_MOUNTH_STATE=0,1===PACMAN_TRAILER_DIRECTION?PACMAN_TRAILER_POSITION_X+=PACMAN_TRAILER_POSITION_STEP:3===PACMAN_TRAILER_DIRECTION&&(PACMAN_TRAILER_POSITION_X-=PACMAN_TRAILER_POSITION_STEP),PACMAN_TRAILER_POSITION_X<-650&&(PACMAN_TRAILER_DIRECTION=1,PACMAN_TRAILER_POSITION_STEP++),GHOST_BLINKY_TRAILER_BODY_STATE<GHOST_TRAILER_BODY_STATE_MAX?GHOST_BLINKY_TRAILER_BODY_STATE++:GHOST_BLINKY_TRAILER_BODY_STATE=0,GHOST_PINKY_TRAILER_BODY_STATE<GHOST_TRAILER_BODY_STATE_MAX?GHOST_PINKY_TRAILER_BODY_STATE++:GHOST_PINKY_TRAILER_BODY_STATE=0,GHOST_INKY_TRAILER_BODY_STATE<GHOST_TRAILER_BODY_STATE_MAX?GHOST_INKY_TRAILER_BODY_STATE++:GHOST_INKY_TRAILER_BODY_STATE=0,GHOST_CLYDE_TRAILER_BODY_STATE<GHOST_TRAILER_BODY_STATE_MAX?GHOST_CLYDE_TRAILER_BODY_STATE++:GHOST_CLYDE_TRAILER_BODY_STATE=0,1===GHOST_BLINKY_TRAILER_DIRECTION?GHOST_BLINKY_TRAILER_POSITION_X+=GHOST_TRAILER_POSITION_STEP:3===GHOST_BLINKY_TRAILER_DIRECTION&&(GHOST_BLINKY_TRAILER_POSITION_X-=GHOST_TRAILER_POSITION_STEP),1===GHOST_PINKY_TRAILER_DIRECTION?GHOST_PINKY_TRAILER_POSITION_X+=GHOST_TRAILER_POSITION_STEP:3===GHOST_PINKY_TRAILER_DIRECTION&&(GHOST_PINKY_TRAILER_POSITION_X-=GHOST_TRAILER_POSITION_STEP),1===GHOST_INKY_TRAILER_DIRECTION?GHOST_INKY_TRAILER_POSITION_X+=GHOST_TRAILER_POSITION_STEP:3===GHOST_INKY_TRAILER_DIRECTION&&(GHOST_INKY_TRAILER_POSITION_X-=GHOST_TRAILER_POSITION_STEP),1===GHOST_CLYDE_TRAILER_DIRECTION?GHOST_CLYDE_TRAILER_POSITION_X+=GHOST_TRAILER_POSITION_STEP:3===GHOST_CLYDE_TRAILER_DIRECTION&&(GHOST_CLYDE_TRAILER_POSITION_X-=GHOST_TRAILER_POSITION_STEP),GHOST_BLINKY_TRAILER_POSITION_X<-255&&(GHOST_BLINKY_TRAILER_DIRECTION=1,GHOST_BLINKY_TRAILER_STATE=1),GHOST_PINKY_TRAILER_POSITION_X<-220&&(GHOST_PINKY_TRAILER_DIRECTION=1,GHOST_PINKY_TRAILER_STATE=1),GHOST_INKY_TRAILER_POSITION_X<-185&&(GHOST_INKY_TRAILER_DIRECTION=1,GHOST_INKY_TRAILER_STATE=1),GHOST_CLYDE_TRAILER_POSITION_X<-150&&(GHOST_CLYDE_TRAILER_DIRECTION=1,GHOST_CLYDE_TRAILER_STATE=1),drawPacmanTrailer(),drawGhostsTrailer(),750===HOME_TRAILER_STATE?(clearInterval(HOME_TRAILER_TIMER),HOME_TRAILER_TIMER=-1):HOME_TRAILER_STATE++}function getGhostsTrailerCanevasContext(){return PACMAN_TRAILER_CANVAS_CONTEXT}function drawGhostsTrailer(){var e=getGhostsTrailerCanevasContext();e.fillStyle=1===GHOST_BLINKY_TRAILER_STATE?GHOST_AFFRAID_COLOR:GHOST_BLINKY_COLOR,drawHelperGhost(e,GHOST_BLINKY_TRAILER_POSITION_X,GHOST_BLINKY_TRAILER_POSITION_Y,GHOST_BLINKY_TRAILER_DIRECTION,GHOST_BLINKY_TRAILER_BODY_STATE,GHOST_BLINKY_TRAILER_STATE,0),e.fillStyle=1===GHOST_PINKY_TRAILER_STATE?GHOST_AFFRAID_COLOR:GHOST_PINKY_COLOR,drawHelperGhost(e,GHOST_PINKY_TRAILER_POSITION_X,GHOST_PINKY_TRAILER_POSITION_Y,GHOST_PINKY_TRAILER_DIRECTION,GHOST_PINKY_TRAILER_BODY_STATE,GHOST_PINKY_TRAILER_STATE,0),e.fillStyle=1===GHOST_INKY_TRAILER_STATE?GHOST_AFFRAID_COLOR:GHOST_INKY_COLOR,drawHelperGhost(e,GHOST_INKY_TRAILER_POSITION_X,GHOST_INKY_TRAILER_POSITION_Y,GHOST_INKY_TRAILER_DIRECTION,GHOST_INKY_TRAILER_BODY_STATE,GHOST_INKY_TRAILER_STATE,0),e.fillStyle=1===GHOST_CLYDE_TRAILER_STATE?GHOST_AFFRAID_COLOR:GHOST_CLYDE_COLOR,drawHelperGhost(e,GHOST_CLYDE_TRAILER_POSITION_X,GHOST_CLYDE_TRAILER_POSITION_Y,GHOST_CLYDE_TRAILER_DIRECTION,GHOST_CLYDE_TRAILER_BODY_STATE,GHOST_CLYDE_TRAILER_STATE,0)}function eraseGhostsTrailer(e){var T=getGhostsTrailerCanevasContext();T.clearRect(GHOST_BLINKY_TRAILER_POSITION_X-17,GHOST_BLINKY_TRAILER_POSITION_Y-17,34,34),T.clearRect(GHOST_PINKY_TRAILER_POSITION_X-17,GHOST_BLINKY_TRAILER_POSITION_Y-17,34,34),T.clearRect(GHOST_INKY_TRAILER_POSITION_X-17,GHOST_BLINKY_TRAILER_POSITION_Y-17,34,34),T.clearRect(GHOST_CLYDE_TRAILER_POSITION_X-17,GHOST_BLINKY_TRAILER_POSITION_Y-17,34,34)}function getPacmanTrailerCanevasContext(){return PACMAN_TRAILER_CANVAS_CONTEXT}function drawPacmanTrailer(){var e=getPacmanTrailerCanevasContext();e.fillStyle="#fff200",e.beginPath();var T=0,t=2*Math.PI,_=PACMAN_TRAILER_POSITION_X,o=PACMAN_TRAILER_POSITION_Y;1===PACMAN_TRAILER_DIRECTION?(T=(.35-.05*PACMAN_TRAILER_MOUNTH_STATE)*Math.PI,t=(1.65+.05*PACMAN_TRAILER_MOUNTH_STATE)*Math.PI,_-=8):2===PACMAN_TRAILER_DIRECTION?(T=(.85-.05*PACMAN_TRAILER_MOUNTH_STATE)*Math.PI,t=(.15+.05*PACMAN_TRAILER_MOUNTH_STATE)*Math.PI,o-=8):3===PACMAN_TRAILER_DIRECTION?(T=(1.35-.05*PACMAN_TRAILER_MOUNTH_STATE)*Math.PI,t=(.65+.05*PACMAN_TRAILER_MOUNTH_STATE)*Math.PI,_+=8):4===PACMAN_TRAILER_DIRECTION&&(T=(1.85-.05*PACMAN_TRAILER_MOUNTH_STATE)*Math.PI,t=(1.15+.05*PACMAN_TRAILER_MOUNTH_STATE)*Math.PI,o+=8),e.arc(PACMAN_TRAILER_POSITION_X,PACMAN_TRAILER_POSITION_Y,PACMAN_TRAILER_SIZE,T,t,!1),e.lineTo(_,o),e.fill(),e.closePath()}function erasePacmanTrailer(){getPacmanTrailerCanevasContext().clearRect(PACMAN_TRAILER_POSITION_X-PACMAN_TRAILER_SIZE,PACMAN_TRAILER_POSITION_Y-PACMAN_TRAILER_SIZE,2*PACMAN_TRAILER_SIZE,2*PACMAN_TRAILER_SIZE)}var EATING_SOUND=new buzz.sound(["./sound/eating.mp3"]),GHOST_EATEN_SOUND=new buzz.sound(["./sound/ghost-eaten.mp3"]),EXTRA_LIFE_SOUND=new buzz.sound(["./sound/extra-life.mp3"]),EAT_PILL_SOUND=new buzz.sound(["./sound/eat-pill.mp3"]),EAT_FRUIT_SOUND=new buzz.sound(["./sound/eat-fruit.mp3"]),EAT_GHOST_SOUND=new buzz.sound(["./sound/eat-ghost.mp3"]),SIREN_SOUND=new buzz.sound(["./sound/siren.mp3"]),WAZA_SOUND=new buzz.sound(["./sound/waza.mp3"]),READY_SOUND=new buzz.sound(["./sound/ready.mp3"]),DIE_SOUND=new buzz.sound(["./sound/die.mp3"]),GROUP_SOUND=new buzz.group([EATING_SOUND,SIREN_SOUND,EAT_PILL_SOUND,EAT_GHOST_SOUND,READY_SOUND,DIE_SOUND,WAZA_SOUND,GHOST_EATEN_SOUND,EXTRA_LIFE_SOUND,EAT_FRUIT_SOUND]),EATING_SOUND_LOOPING=!1;function isAvailableSound(){return!("none"===$("#sound").css("display"))}function loadAllSound(){isAvailableSound()&&GROUP_SOUND.load()}function playEatingSound(){isAvailableSound()&&(EATING_SOUND_LOOPING||(EATING_SOUND_LOOPING=!0,EATING_SOUND.setSpeed(1.35),EATING_SOUND.loop(),EATING_SOUND.play()))}function stopEatingSound(){isAvailableSound()&&EATING_SOUND_LOOPING&&(EATING_SOUND.unloop(),EATING_SOUND_LOOPING=!1)}function playExtraLifeSound(){isAvailableSound()&&EXTRA_LIFE_SOUND.play()}function playEatFruitSound(){isAvailableSound()&&EAT_FRUIT_SOUND.play()}function playEatPillSound(){isAvailableSound()&&EAT_PILL_SOUND.play()}function playEatGhostSound(){isAvailableSound()&&EAT_GHOST_SOUND.play()}function playWazaSound(){isAvailableSound()&&(stopSirenSound(),stopEatSound(),WAZA_SOUND.loop(),WAZA_SOUND.play())}function stopWazaSound(){isAvailableSound()&&WAZA_SOUND.stop()}function playGhostEatenSound(){isAvailableSound()&&(stopSirenSound(),stopWazaSound(),GHOST_EATEN_SOUND.play(),GHOST_EATEN_SOUND.loop())}function stopEatSound(){isAvailableSound()&&GHOST_EATEN_SOUND.stop()}function playSirenSound(){isAvailableSound()&&(stopWazaSound(),stopEatSound(),SIREN_SOUND.loop(),SIREN_SOUND.play())}function stopSirenSound(){isAvailableSound()&&SIREN_SOUND.stop()}function playReadySound(){isAvailableSound()&&READY_SOUND.play()}function playDieSound(){isAvailableSound()&&(GROUP_SOUND.stop(),DIE_SOUND.play())}function stopAllSound(){isAvailableSound()&&GROUP_SOUND.stop()}function simulateKeyup(e){var T=jQuery.Event("keyup");T.keyCode=e,jQuery("body").trigger(T)}function simulateKeydown(e){var T=jQuery.Event("keydown");T.keyCode=e,jQuery("body").trigger(T)}$(document).ready(function(){loadAllSound(),HELP_TIMER=setInterval("blinkHelp()",HELP_DELAY),initHome(),$(".sound").click(function(e){e.stopPropagation(),"on"===$(this).attr("data-sound")?($(".sound").attr("data-sound","off"),$(".sound").find("img").attr("src","img/sound-off.png"),GROUP_SOUND.mute()):($(".sound").attr("data-sound","on"),$(".sound").find("img").attr("src","img/sound-on.png"),GROUP_SOUND.unmute())}),$(".help-button, #help").click(function(e){e.stopPropagation(),PACMAN_DEAD||LOCK||GAMEOVER||("none"===$("#help").css("display")?($("#help").fadeIn("slow"),$(".help-button").hide(),"none"!==$("#panel").css("display")&&pauseGame()):($("#help").fadeOut("slow"),$(".help-button").show()))}),$(".github,.putchu").click(function(e){e.stopPropagation()}),$("#home").on("click touchstart",function(e){"none"===$("#help").css("display")&&(e.preventDefault(),simulateKeydown(13))}),$("#control-up, #control-up-second, #control-up-big").on("mousedown touchstart",function(e){e.preventDefault(),simulateKeydown(38),simulateKeyup(13)}),$("#control-down, #control-down-second, #control-down-big").on("mousedown touchstart",function(e){e.preventDefault(),simulateKeydown(40),simulateKeyup(13)}),$("#control-left, #control-left-big").on("mousedown touchstart",function(e){e.preventDefault(),simulateKeydown(37),simulateKeyup(13)}),$("#control-right, #control-right-big").on("mousedown touchstart",function(e){e.preventDefault(),simulateKeydown(39),simulateKeyup(13)}),$("body").keyup(function(e){KEYDOWN=!1}),$("body").keydown(function(e){HOME?initGame(!0):(KEYDOWN=!0,PACMAN_DEAD&&!LOCK?(erasePacman(),resetPacman(),drawPacman(),eraseGhosts(),resetGhosts(),drawGhosts(),moveGhosts(),blinkSuperBubbles()):e.keyCode>=37&&e.keyCode<=40&&!PAUSE&&!PACMAN_DEAD&&!LOCK?39===e.keyCode?movePacman(1):40===e.keyCode?movePacman(2):37===e.keyCode?movePacman(3):38===e.keyCode&&movePacman(4):(68!==e.keyCode||PAUSE)&&(80!==e.keyCode||PACMAN_DEAD||LOCK?GAMEOVER&&initHome():PAUSE?resumeGame():pauseGame()))})});
//https://thepcmanwebsite.com v1 12-30-20
window.addEventListener("keydown", function(e) {if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {e.preventDefault();}}, false);
