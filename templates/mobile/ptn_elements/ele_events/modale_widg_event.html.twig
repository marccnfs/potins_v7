{% set groups  = eventGroups|default(events|default([])) %}
{% set summary = eventSummary|default(null) %}
{% set referenceLocation = groups|first|default(null) %}
{% set primaryEvent =
    (summary is defined and summary.primaryEvent is defined) ? summary.primaryEvent :
    (referenceLocation is defined and referenceLocation.bookingEvent is defined) ? referenceLocation.bookingEvent :
    (referenceLocation is defined and referenceLocation.event is defined) ? referenceLocation.event :
    (referenceLocation is defined ? referenceLocation : null)
%}
{% set potin =
    (summary is defined and summary.potin is defined) ? summary.potin :
    (primaryEvent is defined and primaryEvent.potin is defined) ? primaryEvent.potin :
    null
%}
{% set nextDate =
    (summary is defined and summary.nextDate is defined) ? summary.nextDate :
    (referenceLocation is defined and referenceLocation.nextDate is defined) ? referenceLocation.nextDate :
    (referenceLocation is defined and referenceLocation.dates is defined and referenceLocation.dates|length > 0)
    ? referenceLocation.dates|first
    : null
%}

<div class="widget_event_card color-event-1">
    <div class="widget_inner-event">
{#
        <div class="w_titlevent">
            {% if potin %}
                <h2 title="evenement de {{ potin.titre }}">{{ potin.titre|lower|capitalize }}</h2>
            {% elseif primaryEvent is not null %}
                <h2 title="evenement">{{ primaryEvent.titre|lower|capitalize }}</h2>
            {% endif %}
            {% if primaryEvent is not null and primaryEvent.description is defined and primaryEvent.description is not same as (" ") %}
                <h3>{{ primaryEvent.description|raw|lower|capitalize }}</h3>
            {% endif %}
        </div>
#}
        <div class="info_event">
            <div class="ptn-inf1">
                <div class="ptn-info0">
                    <svg xmlns="http://www.w3.org/2000/svg" focusable="false" role="img" fill="currentColor" width="700pt" height="700pt" viewBox="0 0 700 700"  aria-hidden="true" class="info-svg">
                        <g>
                            <path d="m265.44 63.281c-10.641 0-19.602 8.9609-19.602 19.602v8.3984h-34.16c-41.441 0-75.602 34.16-75.602 75.602v267.68c0 41.441 34.16 75.602 75.602 75.602h276.08c41.441 0 75.602-34.16 75.602-75.602v-267.68c0-41.441-34.16-75.602-75.602-75.602h-34.16v-8.3984c0-10.641-8.9609-19.602-19.602-19.602s-19.602 8.9609-19.602 19.602v8.3984l-129.36 0.003906v-8.3984c0-10.645-8.3984-19.602-19.598-19.602zm222.88 408.24h-276.64c-20.16 0-36.398-16.238-36.398-36.398v-192.08h348.88v191.52c0.55859 20.723-15.68 36.961-35.84 36.961zm-73.359-341.04v8.3984c0 10.641 8.9609 19.602 19.602 19.602s19.602-8.9609 19.602-19.602v-8.3984h34.16c20.16 0 36.398 16.238 36.398 36.398v36.961h-349.44v-36.961c0-20.16 16.238-36.398 36.398-36.398h34.16v8.3984c0 10.641 8.9609 19.602 19.602 19.602s19.602-8.9609 19.602-19.602v-8.3984z"/>
                            <path d="m311.92 285.6c-0.55859-1.1211-1.1211-2.2383-1.6797-3.3594-0.55859-1.1211-1.6797-2.2383-2.2383-2.8008-1.1211-1.1211-1.6797-1.6797-2.8008-2.2383s-2.2383-1.1211-3.3594-1.6797c-1.1211-0.55859-2.2383-0.55859-3.9219-1.1211-2.8008-0.55859-5.0391-0.55859-7.8398 0-1.1211 0.55859-2.2383 0.55859-3.9219 1.1211-1.6797 0.55859-2.2383 1.1211-3.3594 1.6797-1.1211 0.55859-2.2383 1.6797-2.8008 2.2383-1.1211 1.1211-1.6797 1.6797-2.2383 2.8008-0.55859 1.1211-1.1211 2.2383-1.6797 3.3594-0.55859 1.1211-1.1211 2.2383-1.1211 3.9219 0 1.1211-0.55859 2.8008-0.55859 3.9219 0 5.0391 2.2383 10.078 5.6016 14 1.1211 1.1211 1.6797 1.6797 2.8008 2.2383 1.1211 0.55859 2.2383 1.1211 3.3594 1.6797 1.1211 0.55859 2.2383 1.1211 3.9219 1.1211 1.1211 0 2.8008 0.55859 3.9219 0.55859 1.1211 0 2.8008 0 3.9219-0.55859 1.1211 0 2.8008-0.55859 3.9219-1.1211 1.1211-0.55859 2.2383-1.1211 3.3594-1.6797 1.1211-0.55859 2.2383-1.6797 2.8008-2.2383 3.9219-3.3594 5.6016-8.9609 5.6016-14 0-1.1211 0-2.8008-0.55859-3.9219-0.015626-1.6836-0.57422-2.8047-1.1328-3.9219z"/>
                            <path d="m336 279.44c-3.3594 3.9219-5.6016 8.9609-5.6016 14 0 5.0391 2.2383 10.078 5.6016 14 3.9219 3.9219 8.9609 5.6016 14 5.6016 1.1211 0 2.8008 0 3.9219-0.55859 1.1211 0 2.8008-0.55859 3.9219-1.1211 1.1211-0.55859 2.2383-1.1211 3.3594-1.6797s2.2383-1.6797 2.8008-2.2383c1.1211-1.1211 1.6797-1.6797 2.2383-2.8008 0.55859-1.1211 1.1211-2.2383 1.6797-3.3594s1.1211-2.2383 1.1211-3.9219c0-1.1211 0.55859-2.8008 0.55859-3.9219 0-5.0391-2.2383-10.078-5.6016-14-7.2812-7.8398-20.719-7.8398-28 0z"/>
                            <path d="m423.92 285.6c-0.55859-1.1211-1.1211-2.2383-1.6797-3.3594-0.55859-1.1211-1.6797-2.2383-2.2383-2.8008-4.4805-4.4805-11.199-6.7188-17.922-5.6016-1.1211 0.55859-2.2383 0.55859-3.9219 1.1211-1.6797 0.55859-2.2383 1.1211-3.3594 1.6797-1.1211 0.55859-2.2383 1.6797-2.8008 2.2383-1.1211 1.1211-1.6797 1.6797-2.2383 2.8008-0.55859 1.1211-1.1211 2.2383-1.6797 3.3594-0.55859 1.1211-1.1211 2.2383-1.1211 3.9219 0 1.1211-0.55859 2.8008-0.55859 3.9219 0 5.0391 2.2383 10.078 5.6016 14 1.1211 1.1211 1.6797 1.6797 2.8008 2.2383 1.1211 0.55859 2.2383 1.1211 3.3594 1.6797 1.1211 0.55859 2.2383 1.1211 3.9219 1.1211 1.1211 0 2.8008 0.55859 3.9219 0.55859 5.0391 0 10.078-2.2383 14-5.6016 1.1211-1.1211 1.6797-1.6797 2.2383-2.8008s1.1211-2.2383 1.6797-3.3594c0.55859-1.1211 1.1211-2.2383 1.1211-3.9219 0-1.1211 0.55859-2.8008 0.55859-3.9219s0-2.8008-0.55859-3.9219c-0.007813-1.1133-0.56641-2.2344-1.125-3.3516z"/>
                       </g>
                    </svg>
                    <div class="ptn-inf4">
                        {% if nextDate %}
                            <span class="ptn-inf2">à partir du {{ nextDate|date("d-m-Y") }}</span>
                        {% elseif primaryEvent is not null and primaryEvent.appointment is not null and primaryEvent.appointment.starttime is not null %}
                            <span class="ptn-inf2">à partir du {{ primaryEvent.appointment.starttime|date("d-m-Y") }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="ptn-inf1">
                <div class="ptn-info0">
                    <svg xmlns="http://www.w3.org/2000/svg" focusable="false" role="img" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true" class="info-svg">
                        <path d="M12 12c2.486 0 4.5-2.014 4.5-4.5S14.486 3 12 3a4.499 4.499 0 00-4.5 4.5C7.5 9.986 9.514 12 12 12zm0 2.25c-3.004 0-9 1.508-9 4.5v1.75a.5.5 0 00.5.5h17a.5.5 0 00.5-.5v-1.75c0-2.992-5.996-4.5-9-4.5z"></path>
                    </svg>
                    <div class="ptn-inf4">
                        {% if potin and potin.agepotin is defined %}
                            <span class="ptn-inf2">dès {{ potin.agepotin }} ans</span>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {{ include('mobile/ptn_elements/ele_events/bar_resa.html.twig') }}
    </div>
{#
    <div class="illustr-event_card" >
        <div class="e_pictfull_card">
            {% if potin is not null %}
                {% if potin.media.imagejpg|length > 0 and potin.media.imagejpg[0].namefile is defined %}
                    <div class="pict_event" style="background-image: url('{{ asset('upload/module/'~potin.media.imagejpg[0].namefile) }}')"></div>
                {% endif %}
            {%  else %}
                {% if primaryEvent is not null and primaryEvent.media is defined and primaryEvent.media.imagejpg|length > 0 and primaryEvent.media.imagejpg[0].namefile is defined %}
                    <img src="{{ asset(primaryEvent.media.imagejpg[0].getWebPath) }}" alt="image affiche">
                {% endif %}
            {% endif %}
        </div>
    </div>
#}
</div>
