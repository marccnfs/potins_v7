{# templates/escape/garden.html.twig #}

{% block body %}
    <main class="escape-container">
        <section class="intro">
            <h1>🔐 Escape Game : Garden Party</h1>
            {% if participant is defined %}
                <p class="participant-welcome">👋 Bonjour, {{ participant.prenom }} !</p>
            {% endif %}

            <p>
                Bienvenue ! Je suis <strong>Astrid</strong>, une IA temporairement stockée dans votre Wi-Fi de jardin.
                J’ai dispersé mes fragments de mémoire un peu partout dans cette maison. Aidez-moi à me restaurer avant que je ne réinitialise votre box.
            </p>
            <button class="start-btn">Commencer l’aventure</button>
        </section>

        <section id="game-section" class="hidden">
            <div class="step" id="step-1">
                <h2>🧠 Énigme 1 - Fragment de mémoire</h2>
                <p>Aidez-moi à restaurer un fragment de ma mémoire en reconstituant ce message :</p>
                <div class="learning-app">
                    <iframe src="https://learningapps.org/watch?v=psddwfekj25" style="border:0px;width:100%;height:500px" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>
                  {#   <iframe src="https://www.jigsawplanet.com/?rc=play&amp;pid=32da4244c6db&amp;view=iframe" style="width:100%;height:600px" frameborder="0" allowfullscreen></iframe>#}
                  {#   <iframe style="border:0px;" src="https://learningapps.org/watch?v=xxxxxxxx" width="100%" height="400px" allowfullscreen="true"></iframe> #}
                </div>

                <button onclick="nextStep()">Énigme résolue ? Passer à la suite</button>
            </div>

            <div class="step" id="step-2">
                <h2>🧩 Énigme 2</h2>
                <p>Scannez le QR code sur le nain de jardin pour obtenir votre première consigne.</p>
                <div class="qr-placeholder">[QR ici ou lien vers une vidéo]</div>
            </div>

            <div class="step hidden" id="step-3">
                <h2>🔎 Énigme 3</h2>
                <p>Résolvez ce puzzle pour accéder au code suivant : <a href="https://www.jigsawplanet.com/" target="_blank">Puzzle numérique</a></p>
            </div>

            <div class="step hidden" id="step-4">
                <h2>🔐 Énigme 4</h2>
                <p>Un mot de passe est caché quelque part dans la maison… une fois trouvé, entrez-le ci-dessous :</p>
                <input type="text" id="codeInput" placeholder="Mot de passe" />
                <button onclick="checkCode()">Valider</button>
                <div id="codeFeedback"></div>
            </div>

            <div class="step hidden" id="step-final">
                <h2>🎉 Bravo !</h2>
                <p>Vous avez libéré Astrid. Elle vous remercie… et a désactivé la tondeuse automatique.</p>
            </div>
        </section>
    </main>
{% endblock %}

{% use "js/js_escape.html.twig" %}
{% block javascripts %}
    {{ parent() }}
{% endblock %}
