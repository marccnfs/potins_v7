{# templates/escape/garden.html.twig #}

{% block body %}
    <main class="escape-container">
        <section class="intro">
            <h1>ğŸ” Escape Game : Garden Party</h1>
            {% if participant is defined %}
                <p class="participant-welcome">ğŸ‘‹ Bonjour, {{ participant.prenom }} !</p>
            {% endif %}

            <p>
                Bienvenue ! Je suis <strong>Astrid</strong>, une IA temporairement stockÃ©e dans votre Wi-Fi de jardin.
                Jâ€™ai dispersÃ© mes fragments de mÃ©moire un peu partout dans cette maison. Aidez-moi Ã  me restaurer avant que je ne rÃ©initialise votre box.
            </p>
            <button class="start-btn">Commencer lâ€™aventure</button>
        </section>

        <section id="game-section" class="hidden">
            <div class="step" id="step-1">
                <h2>ğŸ§  Ã‰nigme 1 - Fragment de mÃ©moire</h2>
                <p>Aidez-moi Ã  restaurer un fragment de ma mÃ©moire en reconstituant ce message :</p>
                <div class="learning-app">
                    <iframe src="https://learningapps.org/watch?v=psddwfekj25" style="border:0px;width:100%;height:500px" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>
                  {#   <iframe src="https://www.jigsawplanet.com/?rc=play&amp;pid=32da4244c6db&amp;view=iframe" style="width:100%;height:600px" frameborder="0" allowfullscreen></iframe>#}
                  {#   <iframe style="border:0px;" src="https://learningapps.org/watch?v=xxxxxxxx" width="100%" height="400px" allowfullscreen="true"></iframe> #}
                </div>

                <button onclick="nextStep()">Ã‰nigme rÃ©solue ? Passer Ã  la suite</button>
            </div>

            <div class="step" id="step-2">
                <h2>ğŸ§© Ã‰nigme 2</h2>
                <p>Scannez le QR code sur le nain de jardin pour obtenir votre premiÃ¨re consigne.</p>
                <div class="qr-placeholder">[QR ici ou lien vers une vidÃ©o]</div>
            </div>

            <div class="step hidden" id="step-3">
                <h2>ğŸ” Ã‰nigme 3</h2>
                <p>RÃ©solvez ce puzzle pour accÃ©der au code suivant : <a href="https://www.jigsawplanet.com/" target="_blank">Puzzle numÃ©rique</a></p>
            </div>

            <div class="step hidden" id="step-4">
                <h2>ğŸ” Ã‰nigme 4</h2>
                <p>Un mot de passe est cachÃ© quelque part dans la maisonâ€¦ une fois trouvÃ©, entrez-le ci-dessous :</p>
                <input type="text" id="codeInput" placeholder="Mot de passe" />
                <button onclick="checkCode()">Valider</button>
                <div id="codeFeedback"></div>
            </div>

            <div class="step hidden" id="step-final">
                <h2>ğŸ‰ Bravo !</h2>
                <p>Vous avez libÃ©rÃ© Astrid. Elle vous remercieâ€¦ et a dÃ©sactivÃ© la tondeuse automatique.</p>
            </div>
        </section>
    </main>
{% endblock %}

{% use "js/js_escape.html.twig" %}
{% block javascripts %}
    {{ parent() }}
{% endblock %}
