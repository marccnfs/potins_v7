{% set titres = {
    1: "Cryptex num√©rique",
    2: "QR code g√©olocalis√©",
    3: "Puzzle num√©rique",
    4: "Formulaire √† pi√®ge logique",
    5: "Vid√©o interactive",
    6: "Code HTML minimal"
} %}

{% set outils = {
    1: "build_one",
    2: "https://www.qr-code-generator.com/",
    3: "https://www.jigsawplanet.com/",
    4: "https://docs.google.com/forms/",
    5: "https://genially.com/",
    6: "https://jsfiddle.net/",
} %}

{% set link = {
    1: "creation du cryptex",
    2: "https://www.qr-code-generator.com/",
    3: "https://www.jigsawplanet.com/",
    4: "https://docs.google.com/forms/",
    5: "https://genially.com/",
    6: "https://jsfiddle.net/",
} %}

{% set instructions = {
    1: "Cr√©e un message cod√© avec un outil de cryptex num√©rique.",
    2: "G√©n√®re un QR code qui renvoie √† une information utile.",
    3: "Cr√©e un puzzle interactif qui cache un indice.",
    4: "Con√ßois un formulaire o√π une mauvaise r√©ponse bloque l'acc√®s.",
    5: "Utilise une vid√©o interactive pour int√©grer une √©nigme visuelle.",
    6: "√âcris ou modifie une ligne de HTML qui change le comportement."
} %}

{% set guide = participant.universe.guide|default('') %}
{% if guide == 'Robot' %}
    <p>ü§ñ Je suis ton assistant num√©rique. D√©chiffrons cette √©tape ensemble !</p>
{% elseif guide == 'Espion' %}
    <p>üïµÔ∏è Chut... chaque √©nigme te rapproche de la v√©rit√©.</p>
{% elseif guide == 'Fant√¥me' %}
    <p>üëª J‚Äôapparais l√† o√π il y a des myst√®res... Suis les indices.</p>
{% elseif guide == 'Scientifique' %}
    <p>üî¨ Une hypoth√®se, une exp√©rience, une d√©couverte. R√©sous cela !</p>
{% endif %}


<div class="etape-template">
    <h4>{{ participant.titresEtapes[etape]|default('√âtape ' ~ etape) }}</h4>
    <p><strong>Objectif :</strong> {{ instructions[etape] }}</p>
    <p><strong>Outil recommand√© :</strong> <a href="{{ outils[etape] }}" target="_blank">{{ outils[etape] }}</a>
        <a href="{{ path(outils[etape]) }}" target="_blank">{{ link[etape] }}</a></p>

    <form method="POST" action="{{ path('escape_save_step', { 'step': etape }) }}">
        <label>Colle ici ton lien ou ton code d'int√©gration (iframe, etc) :</label><br>
        <textarea name="contenu" rows="4" cols="80" required>{{ enigmes[etape]|default('') }}</textarea><br>
        <button type="submit">Enregistrer cette √©nigme</button>
    </form>

    {% if enigmes[etape] is defined %}
        <div class="test-preview">
            <h5>Aper√ßu de ton √©nigme :</h5>
            <div class="preview-box">
                {{ enigmes[etape]|raw }}
            </div>
        </div>
    {% endif %}
</div>
