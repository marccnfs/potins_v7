{# templates/ar/print_markers_sheet.html.twig #}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>{{ eventTitle }} — Pack {{ pack.name }} (planche)</title>
    <style>
        @page { size: A4; margin: 10mm; }
        html, body { margin: 0; padding: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: #111; }
        .sheet { page-break-after: always; width: 190mm; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 6mm; }
        .title { font-size: 14pt; font-weight: 700; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; grid-auto-rows: 1fr; gap: 8mm; }
        .card { border: 1px solid #ddd; border-radius: 6px; padding: 6mm; display: grid; grid-template-rows: auto 1fr auto; gap: 4mm; }
        .meta { display: flex; justify-content: space-between; align-items: baseline; }
        .label { font-weight: 600; }
        .badge { font-size: 10pt; padding: 1mm 3mm; border-radius: 4px; background: #eef7ff; border: 1px solid #cfe7ff; }
        .marker { border: 1px dashed #bbb; border-radius: 6px; padding: 4mm; background: #fafafa; display:flex; align-items:center; justify-content:center; min-height: 80mm; }
        .marker img { max-width: 100%; max-height: 82mm; object-fit: contain; }
        .footer { font-size: 9pt; color: #666; }
        @media screen { body { background:#f0f2f5; padding:16px; } .sheet { background:#fff; box-shadow: 0 0 0 1px #ddd, 0 10px 30px rgba(0,0,0,.08); } }
    </style>
</head>
<body>
{% set perPage = perPage|default(4) %}
{% set items = pack.items %}
{% for page in items|batch(perPage, []) %}
    <section class="sheet">
        <div class="header">
            <div class="title">{{ eventTitle }} — Pack {{ pack.name }}</div>
        </div>
        <div class="grid">
            {% for item in page %}
                {% if item %}
                    <div class="card">
                        <div class="meta">
                            <div class="label">{{ item.label }}</div>
                            <div class="badge">Index : {{ item.index }}</div>
                        </div>
                        <div class="marker">
                            <img src="{{ item.thumb }}" alt="Cible {{ item.index }} – {{ item.label }}">
                        </div>
                        <div class="footer">
                            Test : {{ siteUrl|default('/ra/mindar/test-multi') }} — Cible n°{{ item.index }}
                        </div>
                    </div>
                {% else %}
                    <div class="card"></div>
                {% endif %}
            {% endfor %}
        </div>
    </section>
{% endfor %}
</body>
</html>
